{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\htm_fe\\\\src\\\\components\\\\PlayerScore.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { usePlayer } from '../context/playerContext';\nimport { listenToScores } from '../services/firebaseServices';\nimport { useSearchParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PlayerScore() {\n  _s();\n  const {\n    roomId,\n    scoreList,\n    setScoreList,\n    setPlayerFlashes\n  } = usePlayer();\n  const prevOrder = useRef({});\n  const [params] = useSearchParams();\n  const round = params.get(\"round\") || \"1\";\n  useEffect(() => {\n    const unsubscribePlayers = listenToScores(roomId, scoreList => {\n      if (Array.isArray(scoreList)) {\n        console.log(\"Received scoreList:\", scoreList);\n        const scoreListWithFlashes = scoreList.map(score => ({\n          ...score,\n          flashColor: score.isModified ? score.isCorrect ? \"flash-correct\" : \"flash-incorrect\" : null,\n          isModified: score.isModified\n        }));\n        setPlayerFlashes(scoreListWithFlashes);\n        const sortedList = [...scoreList].sort((a, b) => parseInt(b.score) - parseInt(a.score));\n        console.log(\"Sorted scoreList:\", sortedList);\n        setScoreList(sortedList);\n      }\n      console.log(\"Updated scoreList:\", scoreList);\n    });\n    return () => {\n      unsubscribePlayers();\n    };\n  }, [roomId, setPlayerFlashes, setScoreList, round]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-slate-800/70 backdrop-blur-sm rounded-xl border border-blue-400/30 shadow-xl p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white font-bold text-lg mb-4 text-center border-b border-blue-400/30 pb-2\",\n      children: \"B\\u1EA3ng \\u0110i\\u1EC3m\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative overflow-hidden\",\n      style: {\n        height: `${Math.max(scoreList.length * 70, 120)}px`\n      },\n      children: scoreList.map((player, index) => {\n        const y = index * 70;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `absolute w-[95%] left-[2.5%] flex items-center bg-slate-700/60 backdrop-blur-sm rounded-lg border border-blue-400/20 shadow-lg mb-2 px-4 py-3\n                                ${player.flashColor ? player.flashColor : \"\"}\n                            `,\n          style: {\n            transform: `translateY(${y}px)`,\n            transition: \"transform 1.8s cubic-bezier(.22,1,.36,1), box-shadow 0.3s\",\n            boxShadow: player.flashColor ? player.flashColor === \"flash-correct\" ? \"0 0 16px 2px #4ade80\" : \"0 0 16px 2px #f87171\" : \"0 4px 12px rgba(0,0,0,0.3)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full text-white font-bold text-sm mr-3\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: player.avatar,\n            alt: player.playerName,\n            className: \"w-10 h-10 rounded-full mr-3 border-2 border-blue-400/50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white font-semibold text-sm mb-1\",\n              children: player.playerName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-600/50 to-cyan-500/50 backdrop-blur-sm text-white text-center py-1 px-3 rounded-lg font-mono text-sm border border-blue-400/30\",\n              children: `${player.score} điểm`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this)]\n        }, player.playerName, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                .flash-correct { \n                    animation: flashGreen 0.5s; \n                    background: rgba(34, 197, 94, 0.2) !important;\n                }\n                .flash-incorrect { \n                    animation: flashRed 0.5s; \n                    background: rgba(239, 68, 68, 0.2) !important;\n                }\n                @keyframes flashGreen {\n                  0% { background: rgba(34, 197, 94, 0.4); }\n                  100% { background: rgba(51, 65, 85, 0.6); }\n                }\n                @keyframes flashRed {\n                  0% { background: rgba(239, 68, 68, 0.4); }\n                  100% { background: rgba(51, 65, 85, 0.6); }\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n_s(PlayerScore, \"ckDBUnCx5BWT1hLXrDhde3aJ2jA=\", false, function () {\n  return [usePlayer, useSearchParams];\n});\n_c = PlayerScore;\nexport default PlayerScore;\nvar _c;\n$RefreshReg$(_c, \"PlayerScore\");","map":{"version":3,"names":["React","useEffect","useRef","usePlayer","listenToScores","useSearchParams","jsxDEV","_jsxDEV","PlayerScore","_s","roomId","scoreList","setScoreList","setPlayerFlashes","prevOrder","params","round","get","unsubscribePlayers","Array","isArray","console","log","scoreListWithFlashes","map","score","flashColor","isModified","isCorrect","sortedList","sort","a","b","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","Math","max","length","player","index","y","transform","transition","boxShadow","src","avatar","alt","playerName","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/htm_fe/src/components/PlayerScore.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Score } from '../type';\r\nimport { usePlayer } from '../context/playerContext';\r\nimport { listenToScores } from '../services/firebaseServices';\r\nimport { useSearchParams } from 'react-router-dom';\r\n\r\nfunction PlayerScore() {\r\n    const { roomId, scoreList, setScoreList, setPlayerFlashes } = usePlayer();\r\n    const prevOrder = useRef<{ [name: string]: number }>({});\r\n    const [params] = useSearchParams();\r\n    const round = params.get(\"round\") || \"1\";\r\n\r\n    useEffect(() => {\r\n        const unsubscribePlayers = listenToScores(roomId, (scoreList) => {\r\n            if (Array.isArray(scoreList)) {\r\n                console.log(\"Received scoreList:\", scoreList);\r\n                const scoreListWithFlashes = scoreList.map((score: Score) => ({\r\n                    ...score,\r\n                    flashColor: score.isModified ? score.isCorrect ? \"flash-correct\" : \"flash-incorrect\" : null,\r\n                    isModified: score.isModified\r\n                }));\r\n                setPlayerFlashes(scoreListWithFlashes);\r\n                const sortedList = [...scoreList].sort((a, b) => parseInt(b.score) - parseInt(a.score));\r\n                console.log(\"Sorted scoreList:\", sortedList);\r\n                setScoreList(sortedList);\r\n            }\r\n            console.log(\"Updated scoreList:\", scoreList);\r\n        });\r\n        return () => {\r\n            unsubscribePlayers();\r\n        };\r\n    }, [roomId, setPlayerFlashes, setScoreList, round]);\r\n\r\n    return (\r\n        <div className=\"bg-slate-800/70 backdrop-blur-sm rounded-xl border border-blue-400/30 shadow-xl p-4\">\r\n            <div className=\"text-white font-bold text-lg mb-4 text-center border-b border-blue-400/30 pb-2\">\r\n                Bảng Điểm\r\n            </div>\r\n            <div \r\n                className=\"relative overflow-hidden\"\r\n                style={{ height: `${Math.max(scoreList.length * 70, 120)}px` }}\r\n            >\r\n                {scoreList.map((player: Score, index: number) => {\r\n                    const y = index * 70;\r\n                    return (\r\n                        <div\r\n                            key={player.playerName}\r\n                            className={`absolute w-[95%] left-[2.5%] flex items-center bg-slate-700/60 backdrop-blur-sm rounded-lg border border-blue-400/20 shadow-lg mb-2 px-4 py-3\r\n                                ${player.flashColor ? player.flashColor : \"\"}\r\n                            `}\r\n                            style={{\r\n                                transform: `translateY(${y}px)`,\r\n                                transition: \"transform 1.8s cubic-bezier(.22,1,.36,1), box-shadow 0.3s\",\r\n                                boxShadow: player.flashColor\r\n                                    ? player.flashColor === \"flash-correct\"\r\n                                        ? \"0 0 16px 2px #4ade80\"\r\n                                        : \"0 0 16px 2px #f87171\"\r\n                                    : \"0 4px 12px rgba(0,0,0,0.3)\",\r\n                            }}\r\n                        >\r\n                            <div className=\"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full text-white font-bold text-sm mr-3\">\r\n                                {index + 1}\r\n                            </div>\r\n                            <img\r\n                                src={player.avatar}\r\n                                alt={player.playerName}\r\n                                className=\"w-10 h-10 rounded-full mr-3 border-2 border-blue-400/50\"\r\n                            />\r\n                            <div className=\"flex-1\">\r\n                                <p className=\"text-white font-semibold text-sm mb-1\">{player.playerName}</p>\r\n                                <div className=\"bg-gradient-to-r from-blue-600/50 to-cyan-500/50 backdrop-blur-sm text-white text-center py-1 px-3 rounded-lg font-mono text-sm border border-blue-400/30\">\r\n                                    {`${player.score} điểm`}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <style>{`\r\n                .flash-correct { \r\n                    animation: flashGreen 0.5s; \r\n                    background: rgba(34, 197, 94, 0.2) !important;\r\n                }\r\n                .flash-incorrect { \r\n                    animation: flashRed 0.5s; \r\n                    background: rgba(239, 68, 68, 0.2) !important;\r\n                }\r\n                @keyframes flashGreen {\r\n                  0% { background: rgba(34, 197, 94, 0.4); }\r\n                  100% { background: rgba(51, 65, 85, 0.6); }\r\n                }\r\n                @keyframes flashRed {\r\n                  0% { background: rgba(239, 68, 68, 0.4); }\r\n                  100% { background: rgba(51, 65, 85, 0.6); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PlayerScore;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}