{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\htm_fe\\\\src\\\\layouts\\\\RoundBase\\\\Round2.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { renderGrid } from \"./utils\";\nimport { usePlayer } from \"../../context/playerContext\";\nimport { setSelectedRow } from \"../../components/services\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mainKeyword = \"BÒCÔNGANH\"; // Main obstacle keyword\n\nconst QuestionBoxRound2 = ({\n  obstacleWord,\n  hintWordArray,\n  initialGrid,\n  isHost = false\n}) => {\n  _s();\n  console.log(\"hintWordArray\", typeof hintWordArray);\n  console.log(\"obstacle\", obstacleWord);\n  const [searchParams] = useSearchParams();\n  const {\n    setInitialGrid\n  } = usePlayer();\n  const roomId = searchParams.get(\"roomId\") || \"\";\n  // const hostContext = isHost ? useHost() : { hostInitialGrid: null, setHostInitialGrid: () => {} };\n  // const { hostInitialGrid, setHostInitialGrid } = hostContext;\n  const GRID_SIZE = 20; // Grid size\n  const generateEmptyGrid = () => {\n    return Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(\"\"));\n  };\n  const [grid, setGrid] = useState(generateEmptyGrid());\n  const [revealedRows, setRevealedRows] = useState(Array(GRID_SIZE).fill(false));\n  const [revealedCols, setRevealedCols] = useState(Array(GRID_SIZE).fill(false));\n  const [hintWords, setHintWords] = useState([]);\n\n  // Randomize the grid when component is first mounted if the user is the host\n  useEffect(() => {\n    if (isHost) {\n      const wordList = [\"GIÓ\", \"HẠTGIỐNG\", \"DREAM\", \"THUỐC\", \"CÚC\", \"CHÂUKIỆTLUÂN\"];\n      console.log(\"wordList\", wordList);\n      console.log(\"hintWordArray\", hintWordArray);\n      if (hintWordArray && obstacleWord) {\n        const {\n          randomHintWords,\n          newGrid\n        } = renderGrid(hintWordArray, obstacleWord, GRID_SIZE);\n        console.log(\"randomHintWords\", randomHintWords);\n        console.log(\"newGrid\", newGrid);\n        setHintWords(randomHintWords);\n        setInitialGrid(newGrid);\n        setGrid(newGrid);\n      }\n    } else {\n      if (initialGrid) {\n        setGrid(initialGrid);\n      }\n    }\n  }, [isHost, hintWordArray]);\n\n  // Host-only: Toggle reveal for a specific row\n  const toggleRow = rowIndex => {\n    if (!isHost) return; // Non-host users can't toggle rows\n    setRevealedRows(prev => {\n      const newRevealed = [...prev];\n      newRevealed[rowIndex] = !newRevealed[rowIndex];\n      return newRevealed;\n    });\n    setSelectedRow(roomId, rowIndex.toString());\n  };\n\n  // Host-only: Toggle reveal for a specific column\n  const toggleCol = colIndex => {\n    if (!isHost) return; // Non-host users can't toggle columns\n    setRevealedCols(prev => {\n      const newRevealed = [...prev];\n      newRevealed[colIndex] = !newRevealed[colIndex];\n      return newRevealed;\n    });\n    setSelectedRow(roomId, colIndex.toString());\n  };\n\n  // Host: Handle number click\n  const handleNumberClick = (rowIndex, colIndex, cell, event) => {\n    if (!isHost || !cell.includes(\"number\")) return;\n    const {\n      clientX,\n      clientY\n    } = event;\n    setMenu({\n      visible: true,\n      rowIndex,\n      colIndex,\n      x: clientX,\n      y: clientY\n    });\n  };\n\n  // Host: Handle menu actions\n  const handleMenuAction = async action => {\n    if (menu.rowIndex === undefined || menu.colIndex === undefined) return;\n    const index = menu.rowIndex;\n    const isRow = hintWords.some(word => word.y === index && word.direction === \"horizontal\");\n    try {\n      if (action === \"open\") {\n        if (isRow) {\n          await toggleRow(index);\n        } else {\n          await toggleCol(menu.colIndex);\n        }\n      } else {\n        await fetch(\"/api/rooms/round/action\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            room_id: roomId,\n            action: {\n              type: action,\n              index: isRow ? index : menu.colIndex,\n              isRow\n            }\n          })\n        });\n      }\n    } catch (error) {\n      console.error(`Error sending ${action} signal:`, error);\n    }\n    setMenu({\n      visible: false,\n      x: 0,\n      y: 0\n    });\n  };\n\n  // Close menu on outside click\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setMenu({\n          visible: false,\n          x: 0,\n          y: 0\n        });\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center bg-white rounded-lg shadow-md p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-gray-700 text-xl font-semibold text-center mb-4 max-w-[90%]\",\n      children: \"Trong c\\xE1c gi\\u1EA3i \\u0111\\u1EA5u th\\u1EC3 thao, nh\\u1EEFng \\u0111\\u1ED9i hay v\\u1EADn \\u0111\\u1ED9ng vi\\xEAn m\\u1EA1nh s\\u1EBD \\u0111\\u01B0\\u1EE3c x\\u1EBFp v\\xE0o c\\xF9ng m\\u1ED9t ho\\u1EB7c nhi\\u1EC1u nh\\xF3m trong khi b\\u1ED1c th\\u0103m \\u0111\\u1EC3 tr\\xE1nh vi\\u1EC7c g\\u1EB7p nhau s\\u1EDBm. T\\xEAn g\\u1ECDi chung c\\u1EE7a c\\xE1c nh\\xF3m v\\u1EADn \\u0111\\u1ED9ng vi\\xEAn n\\xE0y l\\xE0 g\\xEC?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-[repeat(20,40px)] grid-rows-[repeat(20,40px)] gap-1 max-h-[400px] overflow-y-scroll\",\n      children: grid.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: row.map((cell, colIndex) => {\n          // Determine if a cell should be revealed\n          const isRevealed = revealedRows[rowIndex] && hintWords.some(word => word.y === rowIndex && word.direction === \"horizontal\") || revealedCols[colIndex] && hintWords.some(word => word.x === colIndex && word.direction === \"vertical\");\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-10 h-10 flex items-center justify-center text-lg font-semibold select-none \n                                        ${cell.includes(\"number\") ? \"text-blue-500 bg-white border-none\" : \"\"}\n                                        ${cell === \"\" ? \"bg-white border-none\" : \"border-gray-400 bg-gray-50\"} \n                                        ${\n            // Reveal text if applicable\n            !cell.includes(\"number\") && isRevealed && obstacleWord && !obstacleWord.includes(cell) ? \"text-black\" : !cell.includes(\"number\") ? \"text-transparent\" : \"\"}\n                                        ${obstacleWord !== null && obstacleWord !== void 0 && obstacleWord.includes(cell) && isRevealed && isNaN(Number(cell)) ? \"font-bold text-red-500\" : \"\"}\n                                    `,\n            onClick: () => {\n              // Allow toggling rows/cols only for the host\n              if (isHost) {\n                if (hintWords.some(word => word.y === rowIndex && word.direction === \"horizontal\")) {\n                  toggleRow(rowIndex);\n                } else if (hintWords.some(word => word.x === colIndex && word.direction === \"vertical\")) {\n                  toggleCol(colIndex);\n                }\n              }\n            },\n            style: {\n              cursor: isHost && hintWords.some(word => word.y === rowIndex || word.x === colIndex) ? \"pointer\" : \"default\"\n            },\n            children: cell.includes(\"number\") ? cell.replace(\"number\", \"\").trim() : cell\n          }, colIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 33\n          }, this);\n        })\n      }, rowIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n};\n\n// const Round2: React.FC<RoundBase> = ({ isHost }) => {\n//     return (\n//         <Play\n//             questionComponent={<ObstacleQuestionBox obstacleWord={mainKeyword} isHost={isHost}/>}\n//             isHost={isHost}\n//         />\n//     );\n// }\n_s(QuestionBoxRound2, \"0VPYXmmiJ3wGzQsAnLp1AievOok=\", false, function () {\n  return [useSearchParams, usePlayer];\n});\n_c = QuestionBoxRound2;\nexport default QuestionBoxRound2;\nvar _c;\n$RefreshReg$(_c, \"QuestionBoxRound2\");","map":{"version":3,"names":["React","useState","useEffect","renderGrid","usePlayer","setSelectedRow","useSearchParams","jsxDEV","_jsxDEV","mainKeyword","QuestionBoxRound2","obstacleWord","hintWordArray","initialGrid","isHost","_s","console","log","searchParams","setInitialGrid","roomId","get","GRID_SIZE","generateEmptyGrid","Array","fill","map","grid","setGrid","revealedRows","setRevealedRows","revealedCols","setRevealedCols","hintWords","setHintWords","wordList","randomHintWords","newGrid","toggleRow","rowIndex","prev","newRevealed","toString","toggleCol","colIndex","handleNumberClick","cell","event","includes","clientX","clientY","setMenu","visible","x","y","handleMenuAction","action","menu","undefined","index","isRow","some","word","direction","fetch","method","headers","body","JSON","stringify","room_id","type","error","handleClickOutside","menuRef","current","contains","target","document","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","row","Fragment","isRevealed","isNaN","Number","onClick","style","cursor","replace","trim","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/htm_fe/src/layouts/RoundBase/Round2.tsx"],"sourcesContent":["import Play from \"../Play\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { renderGrid } from \"./utils\";\r\nimport { RoundBase } from \"../../type\";\r\nimport { useHost } from \"../../context/hostContext\";\r\nimport { usePlayer } from \"../../context/playerContext\";\r\nimport { setSelectedRow } from \"../../components/services\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\ninterface HintWord {\r\n    word: string;\r\n    x: number;\r\n    y: number;\r\n    direction: \"horizontal\" | \"vertical\";\r\n}\r\n\r\ninterface ObstacleQuestionBoxProps {\r\n    obstacleWord?: string;\r\n    hintWordArray?: string[],\r\n    isHost?: boolean; // Indicates if the user is the host\r\n    initialGrid?: string[][]\r\n}\r\n\r\nconst mainKeyword = \"BÒCÔNGANH\"; // Main obstacle keyword\r\n\r\nconst QuestionBoxRound2: React.FC<ObstacleQuestionBoxProps> = ({ obstacleWord, hintWordArray,initialGrid,isHost = false }) => {\r\n    console.log(\"hintWordArray\",typeof hintWordArray)\r\n    console.log(\"obstacle\", obstacleWord)\r\n    const [searchParams] = useSearchParams()\r\n    const {setInitialGrid} = usePlayer()\r\n    const roomId = searchParams.get(\"roomId\") || \"\"\r\n    // const hostContext = isHost ? useHost() : { hostInitialGrid: null, setHostInitialGrid: () => {} };\r\n    // const { hostInitialGrid, setHostInitialGrid } = hostContext;\r\n    const GRID_SIZE = 20; // Grid size\r\n    const generateEmptyGrid = () => {\r\n        return Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(\"\"));\r\n    };\r\n\r\n    const [grid, setGrid] = useState<string[][]>(generateEmptyGrid());\r\n    const [revealedRows, setRevealedRows] = useState<boolean[]>(Array(GRID_SIZE).fill(false));\r\n    const [revealedCols, setRevealedCols] = useState<boolean[]>(Array(GRID_SIZE).fill(false));\r\n    const [hintWords, setHintWords] = useState<HintWord[]>([]);\r\n\r\n    // Randomize the grid when component is first mounted if the user is the host\r\n    useEffect(() => {\r\n        if (isHost) {\r\n            const wordList = [\"GIÓ\", \"HẠTGIỐNG\", \"DREAM\", \"THUỐC\", \"CÚC\", \"CHÂUKIỆTLUÂN\"];\r\n            console.log(\"wordList\", wordList)\r\n            console.log(\"hintWordArray\", hintWordArray)\r\n            if(hintWordArray && obstacleWord){\r\n                const { randomHintWords, newGrid } = renderGrid(hintWordArray, obstacleWord, GRID_SIZE);\r\n                console.log(\"randomHintWords\",randomHintWords)\r\n                console.log(\"newGrid\",newGrid)\r\n                setHintWords(randomHintWords);\r\n                setInitialGrid(newGrid)\r\n                setGrid(newGrid);               \r\n            }\r\n        } else {\r\n            if(initialGrid) {\r\n                setGrid(initialGrid)\r\n            }\r\n        }\r\n    }, [isHost, hintWordArray]);\r\n\r\n    // Host-only: Toggle reveal for a specific row\r\n    const toggleRow = (rowIndex: number) => {\r\n        if (!isHost) return; // Non-host users can't toggle rows\r\n        setRevealedRows((prev) => {\r\n            const newRevealed = [...prev];\r\n            newRevealed[rowIndex] = !newRevealed[rowIndex];\r\n            return newRevealed;\r\n        });\r\n        setSelectedRow(roomId,rowIndex.toString())\r\n    };\r\n\r\n    // Host-only: Toggle reveal for a specific column\r\n    const toggleCol = (colIndex: number) => {\r\n        if (!isHost) return; // Non-host users can't toggle columns\r\n        setRevealedCols((prev) => {\r\n            const newRevealed = [...prev];\r\n            newRevealed[colIndex] = !newRevealed[colIndex];\r\n            return newRevealed;\r\n        });\r\n        setSelectedRow(roomId,colIndex.toString())\r\n    };\r\n\r\n    // Host: Handle number click\r\n  const handleNumberClick = (\r\n    rowIndex: number,\r\n    colIndex: number,\r\n    cell: string,\r\n    event: React.MouseEvent\r\n  ) => {\r\n    if (!isHost || !cell.includes(\"number\")) return;\r\n    const { clientX, clientY } = event;\r\n    setMenu({\r\n      visible: true,\r\n      rowIndex,\r\n      colIndex,\r\n      x: clientX,\r\n      y: clientY,\r\n    });\r\n  };\r\n\r\n  // Host: Handle menu actions\r\n  const handleMenuAction = async (action: \"open\" | \"correct\" | \"incorrect\") => {\r\n    if (menu.rowIndex === undefined || menu.colIndex === undefined) return;\r\n    const index = menu.rowIndex;\r\n    const isRow = hintWords.some(\r\n      (word) => word.y === index && word.direction === \"horizontal\"\r\n    );\r\n\r\n    try {\r\n      if (action === \"open\") {\r\n        if (isRow) {\r\n          await toggleRow(index);\r\n        } else {\r\n          await toggleCol(menu.colIndex);\r\n        }\r\n      } else {\r\n        await fetch(\"/api/rooms/round/action\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            room_id: roomId,\r\n            action: { type: action, index: isRow ? index : menu.colIndex, isRow },\r\n          }),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error sending ${action} signal:`, error);\r\n    }\r\n    setMenu({ visible: false, x: 0, y: 0 });\r\n  };\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setMenu({ visible: false, x: 0, y: 0 });\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center bg-white rounded-lg shadow-md p-6\">\r\n            <div className=\"text-gray-700 text-xl font-semibold text-center mb-4 max-w-[90%]\">\r\n                Trong các giải đấu thể thao, những đội hay vận động viên mạnh sẽ được xếp vào cùng một hoặc nhiều nhóm trong khi bốc thăm để tránh việc gặp nhau sớm. Tên gọi chung của các nhóm vận động viên này là gì?\r\n            </div>\r\n            <div className=\"grid grid-cols-[repeat(20,40px)] grid-rows-[repeat(20,40px)] gap-1 max-h-[400px] overflow-y-scroll\">\r\n                {grid.map((row, rowIndex) => (\r\n                    <React.Fragment key={rowIndex}>\r\n                        {row.map((cell, colIndex) => {\r\n                            // Determine if a cell should be revealed\r\n                            const isRevealed =\r\n                                (revealedRows[rowIndex] &&\r\n                                    hintWords.some(\r\n                                        (word) => word.y === rowIndex && word.direction === \"horizontal\"\r\n                                    )) ||\r\n                                (revealedCols[colIndex] &&\r\n                                    hintWords.some((word) => word.x === colIndex && word.direction === \"vertical\"));\r\n\r\n                            return (\r\n                                <div\r\n                                    key={colIndex}\r\n                                    className={`w-10 h-10 flex items-center justify-center text-lg font-semibold select-none \r\n                                        ${cell.includes(\"number\") ? \"text-blue-500 bg-white border-none\" : \"\"}\r\n                                        ${cell === \"\" ? \"bg-white border-none\" : \"border-gray-400 bg-gray-50\"} \r\n                                        ${\r\n                                        // Reveal text if applicable\r\n                                        !cell.includes(\"number\") && isRevealed && obstacleWord && !obstacleWord.includes(cell)\r\n                                            ? \"text-black\"\r\n                                            : !cell.includes(\"number\")\r\n                                                ? \"text-transparent\"\r\n                                                : \"\"\r\n                                        }\r\n                                        ${obstacleWord?.includes(cell) && isRevealed && isNaN(Number(cell)) ? \"font-bold text-red-500\" : \"\"}\r\n                                    `}\r\n                                    onClick={() => {\r\n                                        // Allow toggling rows/cols only for the host\r\n                                        if (isHost) {\r\n                                            if (\r\n                                                hintWords.some(\r\n                                                    (word) => word.y === rowIndex && word.direction === \"horizontal\"\r\n                                                )\r\n                                            ) {\r\n                                                toggleRow(rowIndex);\r\n                                            } else if (\r\n                                                hintWords.some(\r\n                                                    (word) => word.x === colIndex && word.direction === \"vertical\"\r\n                                                )\r\n                                            ) {\r\n                                                toggleCol(colIndex);\r\n                                            }\r\n                                        }\r\n                                    }}\r\n                                    style={{\r\n                                        cursor:\r\n                                            isHost &&\r\n                                                hintWords.some((word) => word.y === rowIndex || word.x === colIndex)\r\n                                                ? \"pointer\"\r\n                                                : \"default\",\r\n                                    }}\r\n                                >\r\n                                    {cell.includes(\"number\") ? cell.replace(\"number\", \"\").trim() : cell}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </React.Fragment>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n\r\n// const Round2: React.FC<RoundBase> = ({ isHost }) => {\r\n//     return (\r\n//         <Play\r\n//             questionComponent={<ObstacleQuestionBox obstacleWord={mainKeyword} isHost={isHost}/>}\r\n//             isHost={isHost}\r\n//         />\r\n//     );\r\n// }\r\n\r\nexport default QuestionBoxRound2;\r\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,SAAS;AAGpC,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,eAAe,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAgBnD,MAAMC,WAAW,GAAG,WAAW,CAAC,CAAC;;AAEjC,MAAMC,iBAAqD,GAAGA,CAAC;EAAEC,YAAY;EAAEC,aAAa;EAACC,WAAW;EAACC,MAAM,GAAG;AAAM,CAAC,KAAK;EAAAC,EAAA;EAC1HC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAC,OAAOL,aAAa,CAAC;EACjDI,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEN,YAAY,CAAC;EACrC,MAAM,CAACO,YAAY,CAAC,GAAGZ,eAAe,CAAC,CAAC;EACxC,MAAM;IAACa;EAAc,CAAC,GAAGf,SAAS,CAAC,CAAC;EACpC,MAAMgB,MAAM,GAAGF,YAAY,CAACG,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE;EAC/C;EACA;EACA,MAAMC,SAAS,GAAG,EAAE,CAAC,CAAC;EACtB,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,OAAOC,KAAK,CAACF,SAAS,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC,CAACC,GAAG,CAAC,MAAMF,KAAK,CAACF,SAAS,CAAC,CAACG,IAAI,CAAC,EAAE,CAAC,CAAC;EAC3E,CAAC;EAED,MAAM,CAACE,IAAI,EAAEC,OAAO,CAAC,GAAG3B,QAAQ,CAAasB,iBAAiB,CAAC,CAAC,CAAC;EACjE,MAAM,CAACM,YAAY,EAAEC,eAAe,CAAC,GAAG7B,QAAQ,CAAYuB,KAAK,CAACF,SAAS,CAAC,CAACG,IAAI,CAAC,KAAK,CAAC,CAAC;EACzF,MAAM,CAACM,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAYuB,KAAK,CAACF,SAAS,CAAC,CAACG,IAAI,CAAC,KAAK,CAAC,CAAC;EACzF,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGjC,QAAQ,CAAa,EAAE,CAAC;;EAE1D;EACAC,SAAS,CAAC,MAAM;IACZ,IAAIY,MAAM,EAAE;MACR,MAAMqB,QAAQ,GAAG,CAAC,KAAK,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,cAAc,CAAC;MAC7EnB,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEkB,QAAQ,CAAC;MACjCnB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEL,aAAa,CAAC;MAC3C,IAAGA,aAAa,IAAID,YAAY,EAAC;QAC7B,MAAM;UAAEyB,eAAe;UAAEC;QAAQ,CAAC,GAAGlC,UAAU,CAACS,aAAa,EAAED,YAAY,EAAEW,SAAS,CAAC;QACvFN,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAACmB,eAAe,CAAC;QAC9CpB,OAAO,CAACC,GAAG,CAAC,SAAS,EAACoB,OAAO,CAAC;QAC9BH,YAAY,CAACE,eAAe,CAAC;QAC7BjB,cAAc,CAACkB,OAAO,CAAC;QACvBT,OAAO,CAACS,OAAO,CAAC;MACpB;IACJ,CAAC,MAAM;MACH,IAAGxB,WAAW,EAAE;QACZe,OAAO,CAACf,WAAW,CAAC;MACxB;IACJ;EACJ,CAAC,EAAE,CAACC,MAAM,EAAEF,aAAa,CAAC,CAAC;;EAE3B;EACA,MAAM0B,SAAS,GAAIC,QAAgB,IAAK;IACpC,IAAI,CAACzB,MAAM,EAAE,OAAO,CAAC;IACrBgB,eAAe,CAAEU,IAAI,IAAK;MACtB,MAAMC,WAAW,GAAG,CAAC,GAAGD,IAAI,CAAC;MAC7BC,WAAW,CAACF,QAAQ,CAAC,GAAG,CAACE,WAAW,CAACF,QAAQ,CAAC;MAC9C,OAAOE,WAAW;IACtB,CAAC,CAAC;IACFpC,cAAc,CAACe,MAAM,EAACmB,QAAQ,CAACG,QAAQ,CAAC,CAAC,CAAC;EAC9C,CAAC;;EAED;EACA,MAAMC,SAAS,GAAIC,QAAgB,IAAK;IACpC,IAAI,CAAC9B,MAAM,EAAE,OAAO,CAAC;IACrBkB,eAAe,CAAEQ,IAAI,IAAK;MACtB,MAAMC,WAAW,GAAG,CAAC,GAAGD,IAAI,CAAC;MAC7BC,WAAW,CAACG,QAAQ,CAAC,GAAG,CAACH,WAAW,CAACG,QAAQ,CAAC;MAC9C,OAAOH,WAAW;IACtB,CAAC,CAAC;IACFpC,cAAc,CAACe,MAAM,EAACwB,QAAQ,CAACF,QAAQ,CAAC,CAAC,CAAC;EAC9C,CAAC;;EAED;EACF,MAAMG,iBAAiB,GAAGA,CACxBN,QAAgB,EAChBK,QAAgB,EAChBE,IAAY,EACZC,KAAuB,KACpB;IACH,IAAI,CAACjC,MAAM,IAAI,CAACgC,IAAI,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAE;IACzC,MAAM;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAGH,KAAK;IAClCI,OAAO,CAAC;MACNC,OAAO,EAAE,IAAI;MACbb,QAAQ;MACRK,QAAQ;MACRS,CAAC,EAAEJ,OAAO;MACVK,CAAC,EAAEJ;IACL,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMK,gBAAgB,GAAG,MAAOC,MAAwC,IAAK;IAC3E,IAAIC,IAAI,CAAClB,QAAQ,KAAKmB,SAAS,IAAID,IAAI,CAACb,QAAQ,KAAKc,SAAS,EAAE;IAChE,MAAMC,KAAK,GAAGF,IAAI,CAAClB,QAAQ;IAC3B,MAAMqB,KAAK,GAAG3B,SAAS,CAAC4B,IAAI,CACzBC,IAAI,IAAKA,IAAI,CAACR,CAAC,KAAKK,KAAK,IAAIG,IAAI,CAACC,SAAS,KAAK,YACnD,CAAC;IAED,IAAI;MACF,IAAIP,MAAM,KAAK,MAAM,EAAE;QACrB,IAAII,KAAK,EAAE;UACT,MAAMtB,SAAS,CAACqB,KAAK,CAAC;QACxB,CAAC,MAAM;UACL,MAAMhB,SAAS,CAACc,IAAI,CAACb,QAAQ,CAAC;QAChC;MACF,CAAC,MAAM;QACL,MAAMoB,KAAK,CAAC,yBAAyB,EAAE;UACrCC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YAAE,cAAc,EAAE;UAAmB,CAAC;UAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnBC,OAAO,EAAElD,MAAM;YACfoC,MAAM,EAAE;cAAEe,IAAI,EAAEf,MAAM;cAAEG,KAAK,EAAEC,KAAK,GAAGD,KAAK,GAAGF,IAAI,CAACb,QAAQ;cAAEgB;YAAM;UACtE,CAAC;QACH,CAAC,CAAC;MACJ;IACF,CAAC,CAAC,OAAOY,KAAK,EAAE;MACdxD,OAAO,CAACwD,KAAK,CAAC,iBAAiBhB,MAAM,UAAU,EAAEgB,KAAK,CAAC;IACzD;IACArB,OAAO,CAAC;MAAEC,OAAO,EAAE,KAAK;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC,CAAC;EACzC,CAAC;;EAED;EACApD,SAAS,CAAC,MAAM;IACd,MAAMuE,kBAAkB,GAAI1B,KAAiB,IAAK;MAChD,IAAI2B,OAAO,CAACC,OAAO,IAAI,CAACD,OAAO,CAACC,OAAO,CAACC,QAAQ,CAAC7B,KAAK,CAAC8B,MAAc,CAAC,EAAE;QACtE1B,OAAO,CAAC;UAAEC,OAAO,EAAE,KAAK;UAAEC,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAC,CAAC;MACzC;IACF,CAAC;IACDwB,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEN,kBAAkB,CAAC;IAC1D,OAAO,MAAMK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEP,kBAAkB,CAAC;EAC5E,CAAC,EAAE,EAAE,CAAC;EAEJ,oBACIjE,OAAA;IAAKyE,SAAS,EAAC,8DAA8D;IAAAC,QAAA,gBACzE1E,OAAA;MAAKyE,SAAS,EAAC,kEAAkE;MAAAC,QAAA,EAAC;IAElF;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACN9E,OAAA;MAAKyE,SAAS,EAAC,oGAAoG;MAAAC,QAAA,EAC9GvD,IAAI,CAACD,GAAG,CAAC,CAAC6D,GAAG,EAAEhD,QAAQ,kBACpB/B,OAAA,CAACR,KAAK,CAACwF,QAAQ;QAAAN,QAAA,EACVK,GAAG,CAAC7D,GAAG,CAAC,CAACoB,IAAI,EAAEF,QAAQ,KAAK;UACzB;UACA,MAAM6C,UAAU,GACX5D,YAAY,CAACU,QAAQ,CAAC,IACnBN,SAAS,CAAC4B,IAAI,CACTC,IAAI,IAAKA,IAAI,CAACR,CAAC,KAAKf,QAAQ,IAAIuB,IAAI,CAACC,SAAS,KAAK,YACxD,CAAC,IACJhC,YAAY,CAACa,QAAQ,CAAC,IACnBX,SAAS,CAAC4B,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACT,CAAC,KAAKT,QAAQ,IAAIkB,IAAI,CAACC,SAAS,KAAK,UAAU,CAAE;UAEvF,oBACIvD,OAAA;YAEIyE,SAAS,EAAE;AAC/C,0CAA0CnC,IAAI,CAACE,QAAQ,CAAC,QAAQ,CAAC,GAAG,oCAAoC,GAAG,EAAE;AAC7G,0CAA0CF,IAAI,KAAK,EAAE,GAAG,sBAAsB,GAAG,4BAA4B;AAC7G;YACwC;YACA,CAACA,IAAI,CAACE,QAAQ,CAAC,QAAQ,CAAC,IAAIyC,UAAU,IAAI9E,YAAY,IAAI,CAACA,YAAY,CAACqC,QAAQ,CAACF,IAAI,CAAC,GAChF,YAAY,GACZ,CAACA,IAAI,CAACE,QAAQ,CAAC,QAAQ,CAAC,GACpB,kBAAkB,GAClB,EAAE;AACpD,0CAC0CrC,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAEqC,QAAQ,CAACF,IAAI,CAAC,IAAI2C,UAAU,IAAIC,KAAK,CAACC,MAAM,CAAC7C,IAAI,CAAC,CAAC,GAAG,wBAAwB,GAAG,EAAE;AAC3I,qCAAsC;YACF8C,OAAO,EAAEA,CAAA,KAAM;cACX;cACA,IAAI9E,MAAM,EAAE;gBACR,IACImB,SAAS,CAAC4B,IAAI,CACTC,IAAI,IAAKA,IAAI,CAACR,CAAC,KAAKf,QAAQ,IAAIuB,IAAI,CAACC,SAAS,KAAK,YACxD,CAAC,EACH;kBACEzB,SAAS,CAACC,QAAQ,CAAC;gBACvB,CAAC,MAAM,IACHN,SAAS,CAAC4B,IAAI,CACTC,IAAI,IAAKA,IAAI,CAACT,CAAC,KAAKT,QAAQ,IAAIkB,IAAI,CAACC,SAAS,KAAK,UACxD,CAAC,EACH;kBACEpB,SAAS,CAACC,QAAQ,CAAC;gBACvB;cACJ;YACJ,CAAE;YACFiD,KAAK,EAAE;cACHC,MAAM,EACFhF,MAAM,IACFmB,SAAS,CAAC4B,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACR,CAAC,KAAKf,QAAQ,IAAIuB,IAAI,CAACT,CAAC,KAAKT,QAAQ,CAAC,GAClE,SAAS,GACT;YACd,CAAE;YAAAsC,QAAA,EAEDpC,IAAI,CAACE,QAAQ,CAAC,QAAQ,CAAC,GAAGF,IAAI,CAACiD,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC,GAAGlD;UAAI,GAxC9DF,QAAQ;YAAAuC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAyCZ,CAAC;QAEd,CAAC;MAAC,GAxDe/C,QAAQ;QAAA4C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAyDb,CACnB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAAvE,EAAA,CAzMML,iBAAqD;EAAA,QAGhCJ,eAAe,EACbF,SAAS;AAAA;AAAA6F,EAAA,GAJhCvF,iBAAqD;AA2M3D,eAAeA,iBAAiB;AAAC,IAAAuF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}