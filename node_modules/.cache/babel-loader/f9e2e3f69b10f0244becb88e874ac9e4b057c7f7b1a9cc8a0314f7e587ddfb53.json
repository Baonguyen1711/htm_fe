{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\htm_fe\\\\src\\\\pages\\\\Host\\\\Test\\\\History.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { updateQuestion } from './service';\nimport { uploadFile } from '../../../services/uploadAssestServices';\nimport testManageMentService from '../../../services/testManagement.service';\nimport { getHistoryById } from './service';\n\n// Props interface for the component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ViewHistory = () => {\n  _s();\n  const [roomDataList, setRoomDataList] = useState();\n  useEffect(() => {\n    const getHistory = async () => {\n      const data = await getHistoryById();\n      console.log(\"hisory\", data);\n      setRoomDataList(data);\n    };\n    getHistory();\n  }, []);\n  const calculateTotalScore = (playerName, room) => {\n    let total = 0;\n    const rounds = [room.round_1, room.round_2, room.round_3, room.round_4];\n    rounds.forEach(round => {\n      if (round) {\n        const player = round.find(p => p.playerName === playerName);\n        if (player) {\n          total += player.score;\n        }\n      }\n    });\n    return total;\n  };\n\n  // Get unique players across all rounds for a room\n  const getUniquePlayers = room => {\n    const playersMap = new Map();\n    [room.round_1, room.round_2, room.round_3, room.round_4].forEach(round => {\n      if (round) {\n        round.forEach(player => {\n          if (!playersMap.has(player.playerName)) {\n            playersMap.set(player.playerName, player);\n          }\n        });\n      }\n    });\n    return Array.from(playersMap.values());\n  };\n  const [testList, setTestList] = useState([]);\n  const [selectedTestName, setSelectedTestName] = useState(\"\");\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedQuestion, setSelectedQuestion] = useState(null);\n  const [editedQuestion, setEditedQuestion] = useState({});\n  const [isDataExisted, setIsDataExisted] = useState(false);\n  const [activeTab, setActiveTab] = useState('round_1');\n  const [testData, setTestData] = useState({\n    round_1: [],\n    round_2: [],\n    round_3: {},\n    round_4: {}\n  });\n  const fileInputRefs = useRef({});\n  useEffect(() => {\n    const getTestList = async () => {\n      try {\n        const testList = await testManageMentService.getTestNameByUser();\n        localStorage.setItem(\"testList\", JSON.stringify(testList));\n        setTestList(testList);\n      } catch (error) {\n        console.error(\"Error fetching test list:\", error);\n      }\n    };\n    getTestList();\n  }, []);\n  const handleTestChange = event => {\n    setSelectedTestName(event.target.value);\n    setIsDataExisted(false);\n  };\n  const handleViewHistory = async () => {\n    if (!selectedTestName) {\n      alert(\"Please select a test first!\");\n      return;\n    }\n    if (isDataExisted) return;\n    try {\n      const data = await testManageMentService.getTestContent(selectedTestName);\n      console.log(\"data\", data);\n      localStorage.setItem(\"testId\", data[\"round_1\"][0][\"testId\"]);\n      console.log(localStorage.getItem(\"testId\"));\n      setTestData({\n        round_1: data.round_1 || [],\n        round_2: data.round_2 || [],\n        round_3: data.round_3 || {},\n        round_4: data.round_4 || {}\n      });\n      setIsDataExisted(true);\n    } catch (error) {\n      console.error(\"Error fetching test questions:\", error);\n      setTestData({\n        round_1: [],\n        round_2: [],\n        round_3: {},\n        round_4: {}\n      });\n    }\n  };\n  const handleFileUpload = async (question, type, event) => {\n    var _event$target$files, _file$name$split$pop;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (!file) return;\n    const fileExtension = (_file$name$split$pop = file.name.split('.').pop()) === null || _file$name$split$pop === void 0 ? void 0 : _file$name$split$pop.toLowerCase();\n    console.log(\"file.name.\", file.name);\n    console.log(\"fileExtension\", fileExtension);\n    console.log(\"question type inside function\", type);\n    try {\n      const key = await uploadFile(file, `Question ${question.questionId}`);\n      console.log(\"question\", question);\n      const updatedQuestion = {\n        ...question,\n        imgUrl: `https://d1fc7d6en42vzg.cloudfront.net/${key}`\n      };\n      console.log(\"updatedQuestion\", updatedQuestion);\n      await updateQuestion(updatedQuestion, question.questionId || \"\");\n      const updatedTestData = {\n        ...testData\n      };\n      const updateQuestionInList = questions => questions.map(q => q.testId === question.testId && q.questionId === question.questionId ? updatedQuestion : q);\n      updatedTestData.round_1 = updateQuestionInList(updatedTestData.round_1);\n      updatedTestData.round_2 = updateQuestionInList(updatedTestData.round_2);\n      for (const packetName in updatedTestData.round_3) {\n        updatedTestData.round_3[packetName] = updateQuestionInList(updatedTestData.round_3[packetName]);\n      }\n      for (const difficulty in updatedTestData.round_4) {\n        updatedTestData.round_4[difficulty] = updateQuestionInList(updatedTestData.round_4[difficulty]);\n      }\n      setTestData(updatedTestData);\n    } catch (error) {\n      console.error(\"Error uploading file:\", error);\n      alert(\"Failed to upload file.\");\n    }\n  };\n  const openModal = (question, round, groupName) => {\n    if (question) {\n      setSelectedQuestion(question);\n      setEditedQuestion({\n        question: question.question,\n        answer: question.answer,\n        type: question.type || '',\n        imgUrl: question.imgUrl || '',\n        round: question.round.toString() || '',\n        groupName: question.groupName || ''\n      });\n    } else {\n      setSelectedQuestion(null);\n      setEditedQuestion({\n        question: '',\n        answer: '',\n        type: '',\n        imgUrl: '',\n        round: (round === null || round === void 0 ? void 0 : round.toString()) || '',\n        groupName: groupName || ''\n      });\n    }\n    setIsModalOpen(true);\n  };\n  const handleEditClick = question => {\n    setSelectedQuestion(question);\n    setEditedQuestion({\n      question: question.question,\n      answer: question.answer,\n      type: question.type || '',\n      imgUrl: question.imgUrl || ''\n    });\n    setIsModalOpen(true);\n  };\n  const handleAddQuestion = (round, groupName) => {\n    setSelectedQuestion(null);\n    setEditedQuestion({\n      round,\n      groupName\n    });\n    setIsModalOpen(true);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditedQuestion(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleConfirm = async () => {\n    if (!selectedQuestion && !editedQuestion.round) return;\n    if (selectedQuestion) {\n      await updateQuestion(editedQuestion, selectedQuestion.questionId || \"\");\n      const updatedTestData = {\n        ...testData\n      };\n      const updateQuestionInList = questions => questions.map(q => q.testId === selectedQuestion.testId && q.questionId === selectedQuestion.questionId ? {\n        ...q,\n        ...editedQuestion\n      } : q);\n      updatedTestData.round_1 = updateQuestionInList(updatedTestData.round_1);\n      updatedTestData.round_2 = updateQuestionInList(updatedTestData.round_2);\n      for (const packetName in updatedTestData.round_3) {\n        updatedTestData.round_3[packetName] = updateQuestionInList(updatedTestData.round_3[packetName]);\n      }\n      for (const difficulty in updatedTestData.round_4) {\n        updatedTestData.round_4[difficulty] = updateQuestionInList(updatedTestData.round_4[difficulty]);\n      }\n      setTestData(updatedTestData);\n    }\n  };\n  const handleCancel = () => {\n    setIsModalOpen(false);\n    setSelectedQuestion(null);\n    setEditedQuestion({});\n  };\n  const renderTable = (questions, title, round, groupName) => {\n    if (questions.length === 0 && !groupName) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [title && /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold text-white mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-cyan-300 mr-2\",\n          children: \"\\uD83D\\uDCDD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this), questions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-700/50 backdrop-blur-sm border border-blue-400/30 rounded-xl overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-6 gap-4 p-4 bg-slate-600/50 font-semibold text-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"#\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"C\\xE2u H\\u1ECFi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\u0110\\xE1p \\xC1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Lo\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"H\\xECnh \\u1EA2nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Thao T\\xE1c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this), questions.map((question, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-6 gap-4 p-4 border-t border-blue-400/20 hover:bg-slate-600/30 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-blue-200/80\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white\",\n            children: question.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white\",\n            children: question.answer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-blue-200/80\",\n            children: question.type || 'N/A'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col space-y-2 items-start max-w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-3 py-1 rounded-lg hover:from-blue-700 hover:to-cyan-600 transition-all duration-300 text-sm font-medium\",\n              onClick: () => {\n                var _fileInputRefs$curren;\n                return (_fileInputRefs$curren = fileInputRefs.current[question.questionId || 0]) === null || _fileInputRefs$curren === void 0 ? void 0 : _fileInputRefs$curren.click();\n              },\n              children: \"\\uD83D\\uDCE4 T\\u1EA3i L\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-blue-200/60 break-words max-w-full text-xs\",\n              children: question.imgUrl ? '‚úÖ C√≥ h√¨nh ·∫£nh' : '‚ùå Ch∆∞a c√≥ h√¨nh ·∫£nh'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: el => {\n                fileInputRefs.current[question.questionId || 0] = el;\n              },\n              className: \"hidden\",\n              onChange: e => handleFileUpload(question, question.type, e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-gradient-to-r from-yellow-600 to-orange-500 text-white px-3 py-1 rounded-lg hover:from-yellow-700 hover:to-orange-600 transition-all duration-300 text-sm font-medium\",\n              onClick: () => openModal(question),\n              children: \"\\u270F\\uFE0F S\\u1EEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 17\n          }, this)]\n        }, question.testId + index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  };\n  const renderGroupedTable = (groups, roundTitle, round) => {\n    if (Object.keys(groups).length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold text-white mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-cyan-300 mr-2\",\n          children: \"\\uD83C\\uDFAF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), roundTitle]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), Object.entries(groups).map(([groupName, questions]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-xl font-medium text-blue-200 mb-3 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-400 mr-2\",\n            children: \"\\uD83D\\uDCE6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), groupName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this), renderTable(questions, \"\", round, groupName)]\n      }, groupName, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this);\n  };\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'round_1':\n        return renderTable(testData.round_1, \"V√≤ng 1\", \"round_1\");\n      case 'round_2':\n        return renderTable(testData.round_2, \"V√≤ng 2\", \"round_2\");\n      case 'round_3':\n        return renderGroupedTable(testData.round_3, \"V√≤ng 3\", \"round_3\");\n      case 'round_4':\n        return renderGroupedTable(testData.round_4, \"V√≤ng 4\", \"round_4\");\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-white mb-2\",\n        children: \"Xem \\u0110\\u1EC1 Thi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-blue-200/80\",\n        children: \"Qu\\u1EA3n l\\xFD v\\xE0 ch\\u1EC9nh s\\u1EEDa c\\xE1c c\\xE2u h\\u1ECFi trong \\u0111\\u1EC1 thi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 space-y-12\",\n      children: roomDataList && roomDataList.map(room => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-700/50 backdrop-blur-sm border border-blue-400/30 rounded-xl p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold text-white mb-4 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-cyan-300 mr-2\",\n            children: \"\\uD83C\\uDFE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), \"Room \", room.room_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full bg-slate-600/50 border border-blue-400/30 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"bg-slate-700/50 text-blue-200 font-semibold\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-left\",\n                  children: \"Player\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-center\",\n                  children: \"Round 1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-center\",\n                  children: \"Round 2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-center\",\n                  children: \"Round 3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-center\",\n                  children: \"Round 4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-4 text-center\",\n                  children: \"Total Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: getUniquePlayers(room).map(player => {\n                var _room$round_1$find$sc, _room$round_1$find, _room$round_2$find$sc, _room$round_2$find, _room$round_3$find$sc, _room$round_3$find, _room$round_4$find$sc, _room$round_4$find;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"border-t border-blue-400/20 hover:bg-slate-600/30 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 flex items-center space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: player.avatar,\n                      alt: `${player.playerName}'s avatar`,\n                      className: \"w-10 h-10 rounded-full object-cover\",\n                      onError: e => {\n                        e.currentTarget.src = 'https://via.placeholder.com/40';\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 400,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white font-medium\",\n                      children: player.playerName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 408,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 text-center text-white\",\n                    children: (_room$round_1$find$sc = (_room$round_1$find = room.round_1.find(p => p.playerName === player.playerName)) === null || _room$round_1$find === void 0 ? void 0 : _room$round_1$find.score) !== null && _room$round_1$find$sc !== void 0 ? _room$round_1$find$sc : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 text-center text-white\",\n                    children: (_room$round_2$find$sc = (_room$round_2$find = room.round_2.find(p => p.playerName === player.playerName)) === null || _room$round_2$find === void 0 ? void 0 : _room$round_2$find.score) !== null && _room$round_2$find$sc !== void 0 ? _room$round_2$find$sc : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 text-center text-white\",\n                    children: room.round_3 ? (_room$round_3$find$sc = (_room$round_3$find = room.round_3.find(p => p.playerName === player.playerName)) === null || _room$round_3$find === void 0 ? void 0 : _room$round_3$find.score) !== null && _room$round_3$find$sc !== void 0 ? _room$round_3$find$sc : '-' : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 text-center text-white\",\n                    children: (_room$round_4$find$sc = (_room$round_4$find = room.round_4.find(p => p.playerName === player.playerName)) === null || _room$round_4$find === void 0 ? void 0 : _room$round_4$find.score) !== null && _room$round_4$find$sc !== void 0 ? _room$round_4$find$sc : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-4 text-center text-cyan-300 font-semibold\",\n                    children: calculateTotalScore(player.playerName, room)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 21\n                  }, this)]\n                }, player.playerName, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 19\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, room.room_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n};\n_s(ViewHistory, \"q2bAsLGRjXFf8pO1A1kjow+DTO8=\");\n_c = ViewHistory;\nexport default ViewHistory;\nvar _c;\n$RefreshReg$(_c, \"ViewHistory\");","map":{"version":3,"names":["React","useEffect","useState","useRef","updateQuestion","uploadFile","testManageMentService","getHistoryById","jsxDEV","_jsxDEV","ViewHistory","_s","roomDataList","setRoomDataList","getHistory","data","console","log","calculateTotalScore","playerName","room","total","rounds","round_1","round_2","round_3","round_4","forEach","round","player","find","p","score","getUniquePlayers","playersMap","Map","has","set","Array","from","values","testList","setTestList","selectedTestName","setSelectedTestName","isModalOpen","setIsModalOpen","selectedQuestion","setSelectedQuestion","editedQuestion","setEditedQuestion","isDataExisted","setIsDataExisted","activeTab","setActiveTab","testData","setTestData","fileInputRefs","getTestList","getTestNameByUser","localStorage","setItem","JSON","stringify","error","handleTestChange","event","target","value","handleViewHistory","alert","getTestContent","getItem","handleFileUpload","question","type","_event$target$files","_file$name$split$pop","file","files","fileExtension","name","split","pop","toLowerCase","key","questionId","updatedQuestion","imgUrl","updatedTestData","updateQuestionInList","questions","map","q","testId","packetName","difficulty","openModal","groupName","answer","toString","handleEditClick","handleAddQuestion","handleInputChange","e","prev","handleConfirm","handleCancel","renderTable","title","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","index","onClick","_fileInputRefs$curren","current","click","ref","el","onChange","renderGroupedTable","groups","roundTitle","Object","keys","entries","renderTabContent","room_id","_room$round_1$find$sc","_room$round_1$find","_room$round_2$find$sc","_room$round_2$find","_room$round_3$find$sc","_room$round_3$find","_room$round_4$find$sc","_room$round_4$find","src","avatar","alt","onError","currentTarget","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/htm_fe/src/pages/Host/Test/History.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { getTest, getTestByUserId, updateQuestion, addNewQuestion } from './service';\r\nimport { uploadFile } from '../../../services/uploadAssestServices';\r\nimport { Question } from '../../../type';\r\nimport { useQuery } from 'react-query';\r\nimport testManageMentService from '../../../services/testManagement.service';\r\nimport { getHistoryById } from './service';\r\n\r\ninterface PlayerRound {\r\n  avatar: string;\r\n  isCorrect: boolean | null;\r\n  isModified: boolean | null;\r\n  playerName: string;\r\n  score: number;\r\n  stt: string;\r\n}\r\n\r\ninterface RoomData {\r\n  room_id: string;\r\n  round_1: PlayerRound[];\r\n  round_2: PlayerRound[];\r\n  round_3: PlayerRound[] | null;\r\n  round_4: PlayerRound[];\r\n}\r\n\r\n// Props interface for the component\r\ninterface RoomScoreTableProps {\r\n  roomDataList: RoomData[];\r\n}\r\n\r\n\r\nconst ViewHistory: React.FC = () => {\r\n\r\n    const [roomDataList, setRoomDataList] = useState<RoomData[]>()\r\n\r\n    useEffect(()=> {\r\n        const getHistory = async () => {\r\n            const data = await getHistoryById()\r\n\r\n            console.log(\"hisory\", data);\r\n            setRoomDataList(data)\r\n        }\r\n\r\n        getHistory()\r\n    },[])\r\n    \r\n    const calculateTotalScore = (playerName: string, room: RoomData): number => {\r\n    let total = 0;\r\n    const rounds = [room.round_1, room.round_2, room.round_3, room.round_4];\r\n    rounds.forEach((round) => {\r\n      if (round) {\r\n        const player = round.find((p) => p.playerName === playerName);\r\n        if (player) {\r\n          total += player.score;\r\n        }\r\n      }\r\n    });\r\n    return total;\r\n  };\r\n\r\n  // Get unique players across all rounds for a room\r\n  const getUniquePlayers = (room: RoomData): PlayerRound[] => {\r\n    const playersMap = new Map<string, PlayerRound>();\r\n    [room.round_1, room.round_2, room.round_3, room.round_4].forEach((round) => {\r\n      if (round) {\r\n        round.forEach((player) => {\r\n          if (!playersMap.has(player.playerName)) {\r\n            playersMap.set(player.playerName, player);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return Array.from(playersMap.values());\r\n  };\r\n\r\n  const [testList, setTestList] = useState<string[]>([]);\r\n  const [selectedTestName, setSelectedTestName] = useState<string>(\"\");\r\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\r\n  const [selectedQuestion, setSelectedQuestion] = useState<Question | null>(null);\r\n  const [editedQuestion, setEditedQuestion] = useState<Partial<Question>>({});\r\n  const [isDataExisted, setIsDataExisted] = useState<boolean>(false);\r\n  const [activeTab, setActiveTab] = useState<string>('round_1');\r\n  const [testData, setTestData] = useState<{\r\n    round_1: Question[];\r\n    round_2: Question[];\r\n    round_3: { [key: string]: Question[] };\r\n    round_4: { [key: string]: Question[] };\r\n  }>({\r\n    round_1: [],\r\n    round_2: [],\r\n    round_3: {},\r\n    round_4: {},\r\n  });\r\n  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\r\n\r\n  useEffect(() => {\r\n    const getTestList = async () => {\r\n      try {\r\n        const testList = await testManageMentService.getTestNameByUser();\r\n        localStorage.setItem(\"testList\", JSON.stringify(testList));\r\n        setTestList(testList);\r\n      } catch (error) {\r\n        console.error(\"Error fetching test list:\", error);\r\n      }\r\n    };\r\n    getTestList();\r\n  }, []);\r\n\r\n  const handleTestChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setSelectedTestName(event.target.value);\r\n    setIsDataExisted(false);\r\n  };\r\n\r\n  const handleViewHistory = async () => {\r\n    if (!selectedTestName) {\r\n      alert(\"Please select a test first!\");\r\n      return;\r\n    }\r\n    if (isDataExisted) return;\r\n    try {\r\n      const data = await testManageMentService.getTestContent(selectedTestName);\r\n      console.log(\"data\", data);\r\n      localStorage.setItem(\"testId\", data[\"round_1\"][0][\"testId\"]);\r\n      console.log(localStorage.getItem(\"testId\"));\r\n\r\n      setTestData({\r\n        round_1: data.round_1 || [],\r\n        round_2: data.round_2 || [],\r\n        round_3: data.round_3 || {},\r\n        round_4: data.round_4 || {},\r\n      });\r\n      setIsDataExisted(true);\r\n    } catch (error) {\r\n      console.error(\"Error fetching test questions:\", error);\r\n      setTestData({\r\n        round_1: [],\r\n        round_2: [],\r\n        round_3: {},\r\n        round_4: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (question: Question, type: string | undefined, event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const fileExtension = file.name.split('.').pop()?.toLowerCase();\r\n    console.log(\"file.name.\", file.name);\r\n    console.log(\"fileExtension\", fileExtension);\r\n    console.log(\"question type inside function\", type);\r\n\r\n    try {\r\n      const key = await uploadFile(file, `Question ${question.questionId}`);\r\n      console.log(\"question\", question);\r\n\r\n      const updatedQuestion = { ...question, imgUrl: `https://d1fc7d6en42vzg.cloudfront.net/${key}` };\r\n      console.log(\"updatedQuestion\", updatedQuestion);\r\n\r\n      await updateQuestion(updatedQuestion, question.questionId || \"\");\r\n\r\n      const updatedTestData = { ...testData };\r\n      const updateQuestionInList = (questions: Question[]) =>\r\n        questions.map((q) =>\r\n          q.testId === question.testId && q.questionId === question.questionId\r\n            ? updatedQuestion\r\n            : q\r\n        );\r\n\r\n      updatedTestData.round_1 = updateQuestionInList(updatedTestData.round_1);\r\n      updatedTestData.round_2 = updateQuestionInList(updatedTestData.round_2);\r\n      for (const packetName in updatedTestData.round_3) {\r\n        updatedTestData.round_3[packetName] = updateQuestionInList(updatedTestData.round_3[packetName]);\r\n      }\r\n      for (const difficulty in updatedTestData.round_4) {\r\n        updatedTestData.round_4[difficulty] = updateQuestionInList(updatedTestData.round_4[difficulty]);\r\n      }\r\n      setTestData(updatedTestData);\r\n    } catch (error) {\r\n      console.error(\"Error uploading file:\", error);\r\n      alert(\"Failed to upload file.\");\r\n    }\r\n  };\r\n\r\n  const openModal = (question?: Question, round?: string, groupName?: string) => {\r\n    if (question) {\r\n      setSelectedQuestion(question);\r\n      setEditedQuestion({\r\n        question: question.question,\r\n        answer: question.answer,\r\n        type: question.type || '',\r\n        imgUrl: question.imgUrl || '',\r\n        round: question.round.toString() || '',\r\n        groupName: question.groupName || '',\r\n      });\r\n    } else {\r\n      setSelectedQuestion(null);\r\n      setEditedQuestion({\r\n        question: '',\r\n        answer: '',\r\n        type: '',\r\n        imgUrl: '',\r\n        round: round?.toString() || '',\r\n        groupName: groupName || '',\r\n      });\r\n    }\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditClick = (question: Question) => {\r\n    setSelectedQuestion(question);\r\n    setEditedQuestion({\r\n      question: question.question,\r\n      answer: question.answer,\r\n      type: question.type || '',\r\n      imgUrl: question.imgUrl || '',\r\n    });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleAddQuestion = (round: string, groupName?: string) => {\r\n    setSelectedQuestion(null);\r\n    setEditedQuestion({ round, groupName });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setEditedQuestion((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleConfirm = async () => {\r\n    if (!selectedQuestion && !editedQuestion.round) return;\r\n\r\n    if (selectedQuestion) {\r\n      await updateQuestion(editedQuestion, selectedQuestion.questionId || \"\");\r\n      const updatedTestData = { ...testData };\r\n      const updateQuestionInList = (questions: Question[]) =>\r\n        questions.map((q) =>\r\n          q.testId === selectedQuestion.testId && q.questionId === selectedQuestion.questionId\r\n            ? { ...q, ...editedQuestion }\r\n            : q\r\n        );\r\n\r\n      updatedTestData.round_1 = updateQuestionInList(updatedTestData.round_1);\r\n      updatedTestData.round_2 = updateQuestionInList(updatedTestData.round_2);\r\n      for (const packetName in updatedTestData.round_3) {\r\n        updatedTestData.round_3[packetName] = updateQuestionInList(updatedTestData.round_3[packetName]);\r\n      }\r\n      for (const difficulty in updatedTestData.round_4) {\r\n        updatedTestData.round_4[difficulty] = updateQuestionInList(updatedTestData.round_4[difficulty]);\r\n      }\r\n      setTestData(updatedTestData);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedQuestion(null);\r\n    setEditedQuestion({});\r\n  };\r\n\r\n  const renderTable = (questions: Question[], title: string, round: string, groupName?: string) => {\r\n    if (questions.length === 0 && !groupName) return null;\r\n\r\n    return (\r\n      <div className=\"mb-8\">\r\n        {title && (\r\n          <h3 className=\"text-2xl font-semibold text-white mb-4 flex items-center\">\r\n            <span className=\"text-cyan-300 mr-2\">üìù</span>\r\n            {title}\r\n          </h3>\r\n        )}\r\n        {questions.length > 0 && (\r\n          <div className=\"bg-slate-700/50 backdrop-blur-sm border border-blue-400/30 rounded-xl overflow-hidden\">\r\n            <div className=\"grid grid-cols-6 gap-4 p-4 bg-slate-600/50 font-semibold text-blue-200\">\r\n              <div>#</div>\r\n              <div>C√¢u H·ªèi</div>\r\n              <div>ƒê√°p √Ån</div>\r\n              <div>Lo·∫°i</div>\r\n              <div>H√¨nh ·∫¢nh</div>\r\n              <div>Thao T√°c</div>\r\n            </div>\r\n            {questions.map((question, index) => (\r\n              <div key={question.testId + index} className=\"grid grid-cols-6 gap-4 p-4 border-t border-blue-400/20 hover:bg-slate-600/30 transition-colors\">\r\n                <div className=\"text-blue-200/80\">{index + 1}</div>\r\n                <div className=\"text-white\">{question.question}</div>\r\n                <div className=\"text-white\">{question.answer}</div>\r\n                <div className=\"text-blue-200/80\">{question.type || 'N/A'}</div>\r\n\r\n                <div className=\"flex flex-col space-y-2 items-start max-w-full\">\r\n                  <button\r\n                    className=\"bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-3 py-1 rounded-lg hover:from-blue-700 hover:to-cyan-600 transition-all duration-300 text-sm font-medium\"\r\n                    onClick={() => fileInputRefs.current[question.questionId || 0]?.click()}\r\n                  >\r\n                    üì§ T·∫£i L√™n\r\n                  </button>\r\n\r\n                  <span className=\"text-blue-200/60 break-words max-w-full text-xs\">\r\n                    {question.imgUrl ? '‚úÖ C√≥ h√¨nh ·∫£nh' : '‚ùå Ch∆∞a c√≥ h√¨nh ·∫£nh'}\r\n                  </span>\r\n\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={(el) => {\r\n                      fileInputRefs.current[question.questionId || 0] = el;\r\n                    }}\r\n                    className=\"hidden\"\r\n                    onChange={(e) => handleFileUpload(question, question.type, e)}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <button\r\n                    className=\"bg-gradient-to-r from-yellow-600 to-orange-500 text-white px-3 py-1 rounded-lg hover:from-yellow-700 hover:to-orange-600 transition-all duration-300 text-sm font-medium\"\r\n                    onClick={() => openModal(question)}\r\n                  >\r\n                    ‚úèÔ∏è S·ª≠a\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderGroupedTable = (groups: { [key: string]: Question[] }, roundTitle: string, round: string) => {\r\n    if (Object.keys(groups).length === 0) return null;\r\n\r\n    return (\r\n      <div className=\"mb-8\">\r\n        <h3 className=\"text-2xl font-semibold text-white mb-4 flex items-center\">\r\n          <span className=\"text-cyan-300 mr-2\">üéØ</span>\r\n          {roundTitle}\r\n        </h3>\r\n        {Object.entries(groups).map(([groupName, questions]) => (\r\n          <div key={groupName} className=\"mb-6\">\r\n            <h4 className=\"text-xl font-medium text-blue-200 mb-3 flex items-center\">\r\n              <span className=\"text-yellow-400 mr-2\">üì¶</span>\r\n              {groupName}\r\n            </h4>\r\n            {renderTable(questions, \"\", round, groupName)}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'round_1':\r\n        return renderTable(testData.round_1, \"V√≤ng 1\", \"round_1\");\r\n      case 'round_2':\r\n        return renderTable(testData.round_2, \"V√≤ng 2\", \"round_2\");\r\n      case 'round_3':\r\n        return renderGroupedTable(testData.round_3, \"V√≤ng 3\", \"round_3\");\r\n      case 'round_4':\r\n        return renderGroupedTable(testData.round_4, \"V√≤ng 4\", \"round_4\");\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-3xl font-bold text-white mb-2\">Xem ƒê·ªÅ Thi</h2>\r\n        <p className=\"text-blue-200/80\">Qu·∫£n l√Ω v√† ch·ªânh s·ª≠a c√°c c√¢u h·ªèi trong ƒë·ªÅ thi</p>\r\n      </div>\r\n\r\n      <div className=\"p-8 space-y-12\">\r\n      {roomDataList && roomDataList.map((room) => (\r\n        <div key={room.room_id} className=\"bg-slate-700/50 backdrop-blur-sm border border-blue-400/30 rounded-xl p-6\">\r\n          <h2 className=\"text-2xl font-semibold text-white mb-4 flex items-center\">\r\n            <span className=\"text-cyan-300 mr-2\">üè†</span>\r\n            Room {room.room_id}\r\n          </h2>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full bg-slate-600/50 border border-blue-400/30 rounded-lg\">\r\n              <thead>\r\n                <tr className=\"bg-slate-700/50 text-blue-200 font-semibold\">\r\n                  <th className=\"p-4 text-left\">Player</th>\r\n                  <th className=\"p-4 text-center\">Round 1</th>\r\n                  <th className=\"p-4 text-center\">Round 2</th>\r\n                  <th className=\"p-4 text-center\">Round 3</th>\r\n                  <th className=\"p-4 text-center\">Round 4</th>\r\n                  <th className=\"p-4 text-center\">Total Score</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {getUniquePlayers(room).map((player) => (\r\n                  <tr\r\n                    key={player.playerName}\r\n                    className=\"border-t border-blue-400/20 hover:bg-slate-600/30 transition-colors\"\r\n                  >\r\n                    <td className=\"p-4 flex items-center space-x-3\">\r\n                      <img\r\n                        src={player.avatar}\r\n                        alt={`${player.playerName}'s avatar`}\r\n                        className=\"w-10 h-10 rounded-full object-cover\"\r\n                        onError={(e) => {\r\n                          e.currentTarget.src = 'https://via.placeholder.com/40';\r\n                        }}\r\n                      />\r\n                      <span className=\"text-white font-medium\">{player.playerName}</span>\r\n                    </td>\r\n                    <td className=\"p-4 text-center text-white\">\r\n                      {room.round_1.find((p) => p.playerName === player.playerName)?.score ?? '-'}\r\n                    </td>\r\n                    <td className=\"p-4 text-center text-white\">\r\n                      {room.round_2.find((p) => p.playerName === player.playerName)?.score ?? '-'}\r\n                    </td>\r\n                    <td className=\"p-4 text-center text-white\">\r\n                      {room.round_3\r\n                        ? room.round_3.find((p) => p.playerName === player.playerName)?.score ?? '-'\r\n                        : '-'}\r\n                    </td>\r\n                    <td className=\"p-4 text-center text-white\">\r\n                      {room.round_4.find((p) => p.playerName === player.playerName)?.score ?? '-'}\r\n                    </td>\r\n                    <td className=\"p-4 text-center text-cyan-300 font-semibold\">\r\n                      {calculateTotalScore(player.playerName, room)}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}