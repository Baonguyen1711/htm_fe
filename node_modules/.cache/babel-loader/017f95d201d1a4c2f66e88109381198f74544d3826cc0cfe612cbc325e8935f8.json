{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\htm_fe\\\\src\\\\pages\\\\Host\\\\Management\\\\HostRound4.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useHost } from '../context/ContextFactory';\nimport GameGrid from './GameGrid';\nimport { sendSelectedCell, sendCellColor, resetBuzz } from '../services/firebaseServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst exampleGrid = [['!', '', '?', '', '!'], ['', '?', '!', '', '?'], ['?', '', '', '!', '?'], ['', '?', '', '', '!'], ['?', '!', '', '?', '']];\nconst HostRound4 = ({\n  isSpectator = false\n}) => {\n  _s();\n  const {\n    roomId,\n    currentQuestion,\n    correctAnswer,\n    selectCell,\n    setCellColor\n  } = useHost();\n  const [gridColors, setGridColors] = useState(Array(5).fill(null).map(() => Array(5).fill('#FFFFFF')));\n  const [menu, setMenu] = useState({\n    visible: false\n  });\n  const [showModal, setShowModal] = useState(false);\n  const [buzzedPlayer, setBuzzedPlayer] = useState('');\n  const [staredPlayer, setStaredPlayer] = useState('');\n  const menuRef = useRef(null);\n  const handleCellClick = (row, col) => {\n    setMenu({\n      visible: true,\n      rowIndex: row,\n      colIndex: col\n    });\n    selectCell === null || selectCell === void 0 ? void 0 : selectCell(row, col);\n  };\n  const handleMenuAction = (action, row, col) => {\n    if (action === 'select') {\n      sendSelectedCell(roomId, col.toString(), row.toString());\n      setGridColors(prev => {\n        const newGrid = prev.map(rowArray => [...rowArray]);\n        newGrid[row][col] = '#FFFF99';\n        return newGrid;\n      });\n      setCellColor === null || setCellColor === void 0 ? void 0 : setCellColor(row, col, '#FFFF99');\n    } else {\n      sendCellColor(roomId, col.toString(), row.toString(), action);\n      setGridColors(prev => {\n        const newGrid = prev.map(rowArray => [...rowArray]);\n        newGrid[row][col] = action;\n        return newGrid;\n      });\n      setCellColor === null || setCellColor === void 0 ? void 0 : setCellColor(row, col, action);\n    }\n    setMenu({\n      visible: false\n    });\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setBuzzedPlayer('');\n    setStaredPlayer('');\n    resetBuzz(roomId);\n  };\n\n  // Handle clicks outside menu\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setMenu({\n          visible: false\n        });\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center bg-slate-800/80 backdrop-blur-sm rounded-2xl border border-blue-400/30 shadow-2xl p-6 mb-4 w-full max-w-3xl mx-auto min-h-[470px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-cyan-200 mb-2 text-center drop-shadow\",\n      children: (currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.question) || ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), correctAnswer && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold text-green-300 mb-4 text-center drop-shadow\",\n      children: correctAnswer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(GameGrid, {\n      initialGrid: exampleGrid,\n      gridColors: gridColors,\n      menu: menu,\n      isHost: true,\n      isSpectator: isSpectator,\n      showModal: showModal,\n      buzzedPlayer: buzzedPlayer,\n      staredPlayer: staredPlayer,\n      menuRef: menuRef,\n      onCellClick: handleCellClick,\n      onMenuAction: handleMenuAction,\n      onCloseModal: handleCloseModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(HostRound4, \"p0jE1WTy3Sg+qYUyMqIh9gj+GAc=\", false, function () {\n  return [useHost];\n});\n_c = HostRound4;\nexport default HostRound4;\nvar _c;\n$RefreshReg$(_c, \"HostRound4\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useHost","GameGrid","sendSelectedCell","sendCellColor","resetBuzz","jsxDEV","_jsxDEV","exampleGrid","HostRound4","isSpectator","_s","roomId","currentQuestion","correctAnswer","selectCell","setCellColor","gridColors","setGridColors","Array","fill","map","menu","setMenu","visible","showModal","setShowModal","buzzedPlayer","setBuzzedPlayer","staredPlayer","setStaredPlayer","menuRef","handleCellClick","row","col","rowIndex","colIndex","handleMenuAction","action","toString","prev","newGrid","rowArray","handleCloseModal","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","children","question","fileName","_jsxFileName","lineNumber","columnNumber","initialGrid","isHost","onCellClick","onMenuAction","onCloseModal","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/htm_fe/src/pages/Host/Management/HostRound4.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useHost } from '../context/ContextFactory';\r\nimport GameGrid from './GameGrid';\r\nimport { sendSelectedCell, sendCellColor, resetBuzz } from '../services/firebaseServices';\r\n\r\nconst exampleGrid = [\r\n  ['!', '', '?', '', '!'],\r\n  ['', '?', '!', '', '?'],\r\n  ['?', '', '', '!', '?'],\r\n  ['', '?', '', '', '!'],\r\n  ['?', '!', '', '?', ''],\r\n];\r\n\r\nconst HostRound4: React.FC<{ isSpectator?: boolean }> = ({ isSpectator = false }) => {\r\n  const { roomId, currentQuestion, correctAnswer, selectCell, setCellColor } = useHost();\r\n  const [gridColors, setGridColors] = useState<string[][]>(\r\n    Array(5).fill(null).map(() => Array(5).fill('#FFFFFF'))\r\n  );\r\n  const [menu, setMenu] = useState<{ visible: boolean; rowIndex?: number; colIndex?: number }>({\r\n    visible: false,\r\n  });\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [buzzedPlayer, setBuzzedPlayer] = useState<string>('');\r\n  const [staredPlayer, setStaredPlayer] = useState<string>('');\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleCellClick = (row: number, col: number) => {\r\n    setMenu({ visible: true, rowIndex: row, colIndex: col });\r\n    selectCell?.(row, col);\r\n  };\r\n\r\n  const handleMenuAction = (action: 'select' | 'red' | 'green' | 'blue' | 'yellow', row: number, col: number) => {\r\n    if (action === 'select') {\r\n      sendSelectedCell(roomId, col.toString(), row.toString());\r\n      setGridColors((prev) => {\r\n        const newGrid = prev.map((rowArray) => [...rowArray]);\r\n        newGrid[row][col] = '#FFFF99';\r\n        return newGrid;\r\n      });\r\n      setCellColor?.(row, col, '#FFFF99');\r\n    } else {\r\n      sendCellColor(roomId, col.toString(), row.toString(), action);\r\n      setGridColors((prev) => {\r\n        const newGrid = prev.map((rowArray) => [...rowArray]);\r\n        newGrid[row][col] = action;\r\n        return newGrid;\r\n      });\r\n      setCellColor?.(row, col, action);\r\n    }\r\n    setMenu({ visible: false });\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n    setBuzzedPlayer('');\r\n    setStaredPlayer('');\r\n    resetBuzz(roomId);\r\n  };\r\n\r\n  // Handle clicks outside menu\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setMenu({ visible: false });\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center bg-slate-800/80 backdrop-blur-sm rounded-2xl border border-blue-400/30 shadow-2xl p-6 mb-4 w-full max-w-3xl mx-auto min-h-[470px]\">\r\n      <h2 className=\"text-2xl font-bold text-cyan-200 mb-2 text-center drop-shadow\">\r\n        {currentQuestion?.question || ''}\r\n      </h2>\r\n      {correctAnswer && (\r\n        <h2 className=\"text-xl font-semibold text-green-300 mb-4 text-center drop-shadow\">\r\n          {correctAnswer}\r\n        </h2>\r\n      )}\r\n      <GameGrid\r\n        initialGrid={exampleGrid}\r\n        gridColors={gridColors}\r\n        menu={menu}\r\n        isHost={true}\r\n        isSpectator={isSpectator}\r\n        showModal={showModal}\r\n        buzzedPlayer={buzzedPlayer}\r\n        staredPlayer={staredPlayer}\r\n        menuRef={menuRef}\r\n        onCellClick={handleCellClick}\r\n        onMenuAction={handleMenuAction}\r\n        onCloseModal={handleCloseModal}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HostRound4;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}