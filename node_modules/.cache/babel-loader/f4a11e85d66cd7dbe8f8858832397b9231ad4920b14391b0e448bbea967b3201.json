{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\htm_fe\\\\src\\\\layouts\\\\RoundBase\\\\Round4.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { sendSelectedCell, sendCellColor } from '../../components/services';\nimport { useSearchParams } from 'react-router-dom';\nimport { usePlayer } from '../../context/playerContext';\nimport { listenToSound, listenToQuestions, listenToSelectedCell, listenToCellColor, listenToAnswers, listenToBuzzing } from '../../services/firebaseServices';\nimport { resetBuzz } from '../../components/services';\nimport { useSounds } from '../../context/soundContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst exampleGrid = [['!', '', '?', '', '!'], ['', '?', '!', '', '?'], ['?', '', '', '!', '?'], ['!', '?', '', '', '!'], ['?', '!', '', '?', '']];\n\n// Example questions for testing\nconst exampleQuestions = ['Question 1', 'Question 2', 'Question 3', 'Question 4', 'Question 5', 'Question 6', 'Question 7', 'Question 8', 'Question 9', 'Question 10', 'Question 11', 'Question 12', 'Question 13', 'Question 14', 'Question 15', 'Question 16', 'Question 17', 'Question 18', 'Question 19', 'Question 20', 'Question 21', 'Question 22', 'Question 23', 'Question 24', 'Question 25'];\nconst QuestionBoxRound4 = ({\n  initialGrid,\n  questions,\n  isHost = false\n}) => {\n  _s();\n  const colorMap = {\n    red: '#FF0000',\n    green: '#00FF00',\n    blue: '#0000FF',\n    yellow: '#FFFF00'\n  };\n  const sounds = useSounds();\n  const [selectedQuestion, setSelectedQuestion] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(\"\");\n  const [correctAnswer, setCorrectAnswer] = useState(\"\");\n  const [gridColors, setGridColors] = useState(Array(5).fill(null).map(() => Array(5).fill('#FFFFFF')) // Default grid colors are white\n  );\n  const [menu, setMenu] = useState({\n    visible: false\n  });\n  const [selectedCell, setSelectedCell] = useState(null);\n  const menuRef = useRef(null);\n  const [searchParams] = useSearchParams();\n  const roomId = searchParams.get(\"roomId\") || \"4\";\n  const {\n    setEasyQuestionNumber,\n    setMediumQuestionNumber,\n    setHardQuestionNumber,\n    setLevel\n  } = usePlayer();\n  const [buzzedPlayer, setBuzzedPlayer] = useState(\"\");\n  const [showModal, setShowModal] = useState(false); // State for modal visibility\n  const handleCloseModal = () => {\n    setShowModal(false);\n    // Optionally clear buzzedPlayer if you want to reset it\n    setBuzzedPlayer(\"\");\n    if (isHost) {\n      resetBuzz(roomId);\n    }\n  };\n  // Function to handle cell click (only for host)\n  const handleCellClick = (row, col) => {\n    if (!isHost) return; // Prevent non-host users from interacting\n    setMenu({\n      visible: true,\n      rowIndex: row,\n      colIndex: col\n    });\n  };\n\n  // Function to handle menu actions\n  const handleMenuAction = (action, row, col) => {\n    if (action === 'select') {\n      if (initialGrid[row][col] == \"\") {\n        setLevel(\"Dễ\");\n      }\n      if (initialGrid[row][col] == \"!\") {\n        setLevel(\"Trung bình\");\n      }\n      if (initialGrid[row][col] == \"?\") {\n        setLevel(\"Khó\");\n      }\n      sendSelectedCell(roomId, col.toString(), row.toString());\n      const questionIndex = row * 5 + col; // Calculate question index from grid position\n      if (questions[questionIndex]) {\n        setSelectedQuestion(questions[questionIndex]);\n        setGridColors(prev => {\n          const newGrid = prev.map(rowArray => [...rowArray]);\n          // Reset the previously selected cell to white, if it exists and wasn't colored otherwise\n          if (selectedCell) {\n            const {\n              row: prevRow,\n              col: prevCol\n            } = selectedCell;\n            // Only reset if the cell is still light yellow (i.e., not changed by color buttons)\n            if (newGrid[prevRow][prevCol] === '#FFFF99') {\n              newGrid[prevRow][prevCol] = '#FFFFFF';\n            }\n          }\n          // Set the current cell to light yellow\n          newGrid[row][col] = '#FFFF99'; // Light yellow\n          return newGrid;\n        });\n        // Update the selected cell\n        setSelectedCell({\n          row,\n          col\n        });\n      }\n    } else {\n      sendCellColor(roomId, col.toString(), row.toString(), action);\n      // Set the cell color based on the selected action\n\n      setGridColors(prev => {\n        const newGrid = prev.map(rowArray => [...rowArray]);\n        newGrid[row][col] = colorMap[action];\n        return newGrid;\n      });\n      // If the cell was previously selected, clear the selection\n      if (selectedCell && selectedCell.row === row && selectedCell.col === col) {\n        setSelectedCell(null);\n      }\n    }\n    setMenu({\n      visible: false\n    }); // Close the menu\n  };\n  const lastBuzzedPlayerRef = useRef(null);\n  useEffect(() => {\n    let hasMounted = false;\n    const unsubscribeBuzzing = listenToBuzzing(roomId, playerName => {\n      // if (!hasMounted) {\n      //     hasMounted = true; // skip initial\n      //     return;\n      // }\n      console.log(\"playerName on host\", playerName);\n      console.log(\"listening on buzzing\");\n      if (playerName && playerName !== \"\") {\n        setBuzzedPlayer(playerName);\n        console.log(\"playerName\", typeof playerName);\n        console.log(playerName, \"đã bấm chuông\");\n        setShowModal(true); // Show modal when a player buzzes\n      }\n    });\n    return () => {\n      unsubscribeBuzzing();\n    };\n  }, [roomId]);\n  useEffect(() => {\n    const unsubscribePlayers = listenToSound(roomId, type => {\n      const audio = sounds[`${type}`];\n      if (audio) {\n        audio.play();\n      }\n      console.log(\"sound type\", type);\n    });\n\n    // No need to set state here; it's handled by useState initializer\n    return () => {\n      unsubscribePlayers();\n    };\n  }, []);\n  useEffect(() => {\n    const unsubscribePlayers = listenToAnswers(roomId, answer => {\n      const audio = sounds['correct'];\n      if (audio) {\n        audio.play();\n      }\n      setCorrectAnswer(`Đáp án: ${answer}`);\n      const timeOut = setTimeout(() => {\n        setCorrectAnswer(\"\");\n      }, 4000);\n      console.log(\"answer\", answer);\n      clearTimeout(timeOut);\n    });\n\n    // No need to set state here; it's handled by useState initializer\n    return () => {\n      unsubscribePlayers();\n    };\n  }, []);\n  useEffect(() => {\n    const unsubscribePlayers = listenToQuestions(roomId, data => {\n      console.log(\"questions\", data);\n      setCurrentQuestion(data.question);\n    });\n    return () => {\n      unsubscribePlayers();\n    };\n  }, []);\n  useEffect(() => {\n    const unsubscribePlayers = listenToSelectedCell(roomId, data => {\n      console.log(\"Selected cell data:\", data);\n      // Ensure data has the expected properties\n      if (data && typeof data.rowIndex === 'string' && typeof data.colIndex === 'string') {\n        const row = parseInt(data.rowIndex, 10);\n        const col = parseInt(data.colIndex, 10);\n\n        // Check if indices are valid numbers and within 5x5 grid bounds\n        if (!isNaN(row) && !isNaN(col) && row >= 0 && row < 5 && col >= 0 && col < 5) {\n          setGridColors(prev => {\n            const newGrid = prev.map(rowArray => [...rowArray]);\n            // Reset all cells with light yellow (#FFFF99) to white (#FFFFFF)\n            for (let prevRow = 0; prevRow < 5; prevRow++) {\n              for (let prevCol = 0; prevCol < 5; prevCol++) {\n                if (newGrid[prevRow][prevCol] === '#FFFF99') {\n                  newGrid[prevRow][prevCol] = '#FFFFFF';\n                }\n              }\n            }\n            // Set the current cell to light yellow\n            newGrid[row][col] = '#FFFF99';\n            return newGrid;\n          });\n          // Update the selected cell\n          setSelectedCell({\n            row,\n            col\n          });\n        } else {\n          console.warn(`Invalid cell indices: row=${row}, col=${col}`);\n        }\n      } else {\n        console.warn(\"Invalid or missing data from listenToSelectedCell:\", data);\n      }\n    });\n    return () => {\n      unsubscribePlayers();\n    };\n  }, []);\n  useEffect(() => {\n    const unsubscribePlayers = listenToCellColor(roomId, data => {\n      console.log(\"questions\", data);\n      const row = parseInt(data.rowIndex);\n      const col = parseInt(data.colIndex);\n      const color = data.color;\n      if (!isNaN(row) && !isNaN(col) && row >= 0 && row < 5 && col >= 0 && col < 5 && color) {\n        setGridColors(prev => {\n          const newGrid = prev.map(rowArray => [...rowArray]);\n          newGrid[row][col] = colorMap[color];\n          return newGrid;\n        });\n      }\n    });\n    return () => {\n      unsubscribePlayers();\n    };\n  }, []);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setMenu({\n          visible: false\n        });\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold text-black mb-4\",\n      children: currentQuestion ? currentQuestion : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }, this), correctAnswer && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-black mb-4\",\n        children: correctAnswer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-6 gap-2 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this), \" \", ['1', '2', '3', '4', '5'].map(label => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center font-bold text-black w-16 h-16\",\n        children: label\n      }, label, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-rows-5 gap-2\",\n      children: ['A', 'B', 'C', 'D', 'E'].map((rowLabel, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center font-bold text-black w-16 h-16\",\n          children: [rowLabel, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 25\n        }, this), initialGrid[rowIndex].map((cell, colIndex) => {\n          const showMenu = menu.visible && menu.rowIndex === rowIndex && menu.colIndex === colIndex;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => handleCellClick(rowIndex, colIndex),\n              className: `flex items-center justify-center w-16 h-16 rounded-md ${isHost ? 'cursor-pointer' : 'cursor-not-allowed'}` // Disable interaction for non-hosts\n              ,\n              style: {\n                backgroundColor: gridColors[rowIndex][colIndex],\n                border: '1px solid #000'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-black text-lg\",\n                children: cell\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 37\n            }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: menuRef,\n              className: \"absolute left-20 top-1/2 transform -translate-y-1/2 flex space-x-2 bg-white border border-gray-300 rounded shadow-lg p-1 z-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-2 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\",\n                onClick: () => handleMenuAction('select', rowIndex, colIndex),\n                children: \"SELECT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-6 h-6 bg-red-500 rounded\",\n                onClick: () => handleMenuAction('red', rowIndex, colIndex)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-6 h-6 bg-green-500 rounded\",\n                onClick: () => handleMenuAction('green', rowIndex, colIndex)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-6 h-6 bg-blue-500 rounded\",\n                onClick: () => handleMenuAction('blue', rowIndex, colIndex)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-6 h-6 bg-yellow-500 rounded\",\n                onClick: () => handleMenuAction('yellow', rowIndex, colIndex)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 41\n            }, this)]\n          }, `${rowIndex}-${colIndex}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 33\n          }, this);\n        })]\n      }, rowIndex, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 13\n    }, this), showModal && buzzedPlayer && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-80 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-800 mb-4 text-center\",\n          children: `${buzzedPlayer} đã nhấn chuông trả lời`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCloseModal,\n            className: \"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400\",\n            children: \"\\u0110\\xF3ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 288,\n    columnNumber: 9\n  }, this);\n};\n_s(QuestionBoxRound4, \"u92jXm98hiUY3iTLGxyqaX4mEcc=\", false, function () {\n  return [useSounds, useSearchParams, usePlayer];\n});\n_c = QuestionBoxRound4;\nexport default QuestionBoxRound4;\nvar _c;\n$RefreshReg$(_c, \"QuestionBoxRound4\");","map":{"version":3,"names":["React","useState","useEffect","useRef","sendSelectedCell","sendCellColor","useSearchParams","usePlayer","listenToSound","listenToQuestions","listenToSelectedCell","listenToCellColor","listenToAnswers","listenToBuzzing","resetBuzz","useSounds","jsxDEV","_jsxDEV","Fragment","_Fragment","exampleGrid","exampleQuestions","QuestionBoxRound4","initialGrid","questions","isHost","_s","colorMap","red","green","blue","yellow","sounds","selectedQuestion","setSelectedQuestion","currentQuestion","setCurrentQuestion","correctAnswer","setCorrectAnswer","gridColors","setGridColors","Array","fill","map","menu","setMenu","visible","selectedCell","setSelectedCell","menuRef","searchParams","roomId","get","setEasyQuestionNumber","setMediumQuestionNumber","setHardQuestionNumber","setLevel","buzzedPlayer","setBuzzedPlayer","showModal","setShowModal","handleCloseModal","handleCellClick","row","col","rowIndex","colIndex","handleMenuAction","action","toString","questionIndex","prev","newGrid","rowArray","prevRow","prevCol","lastBuzzedPlayerRef","hasMounted","unsubscribeBuzzing","playerName","console","log","unsubscribePlayers","type","audio","play","answer","timeOut","setTimeout","clearTimeout","data","question","parseInt","isNaN","warn","color","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","label","rowLabel","cell","showMenu","onClick","style","backgroundColor","border","ref","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/htm_fe/src/layouts/RoundBase/Round4.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport Play from '../Play';\r\nimport { RoundBase } from '../../type';\r\nimport { sendSelectedCell, sendCellColor } from '../../components/services';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { usePlayer } from '../../context/playerContext';\r\nimport { deletePath,listenToSound, listenToQuestions, listenToSelectedCell, listenToCellColor, listenToAnswers, listenToBuzzing } from '../../services/firebaseServices';\r\n\r\nimport { resetBuzz } from '../../components/services';\r\nimport { useSounds } from '../../context/soundContext';\r\ninterface QuestionComponentProps {\r\n    initialGrid: string[][]; // 5x5 grid (can be passed from parent or generated)\r\n    questions: string[]; // Array of questions for testing\r\n    isHost?: boolean; // Indicates whether the user is the host\r\n}\r\n\r\nconst exampleGrid = [\r\n    ['!', '', '?', '', '!'],\r\n    ['', '?', '!', '', '?'],\r\n    ['?', '', '', '!', '?'],\r\n    ['!', '?', '', '', '!'],\r\n    ['?', '!', '', '?', ''],\r\n];\r\n\r\n// Example questions for testing\r\nconst exampleQuestions = [\r\n    'Question 1', 'Question 2', 'Question 3', 'Question 4', 'Question 5',\r\n    'Question 6', 'Question 7', 'Question 8', 'Question 9', 'Question 10',\r\n    'Question 11', 'Question 12', 'Question 13', 'Question 14', 'Question 15',\r\n    'Question 16', 'Question 17', 'Question 18', 'Question 19', 'Question 20',\r\n    'Question 21', 'Question 22', 'Question 23', 'Question 24', 'Question 25',\r\n];\r\n\r\nconst QuestionBoxRound4: React.FC<QuestionComponentProps> = ({\r\n    initialGrid,\r\n    questions,\r\n    isHost = false,\r\n}) => {\r\n    const colorMap: Record<string, string> = {\r\n        red: '#FF0000',\r\n        green: '#00FF00',\r\n        blue: '#0000FF',\r\n        yellow: '#FFFF00',\r\n    };\r\n    const sounds = useSounds();\r\n    const [selectedQuestion, setSelectedQuestion] = useState<string | null>(null);\r\n    const [currentQuestion, setCurrentQuestion] = useState<string>(\"\")\r\n    const [correctAnswer, setCorrectAnswer] = useState<string>(\"\")\r\n    const [gridColors, setGridColors] = useState<string[][]>(\r\n        Array(5).fill(null).map(() => Array(5).fill('#FFFFFF')) // Default grid colors are white\r\n    );\r\n    const [menu, setMenu] = useState<{\r\n        visible: boolean;\r\n        rowIndex?: number;\r\n        colIndex?: number;\r\n    }>({ visible: false });\r\n    const [selectedCell, setSelectedCell] = useState<{ row: number; col: number } | null>(null);\r\n    const menuRef = useRef<HTMLDivElement>(null);\r\n    const [searchParams] = useSearchParams()\r\n    const roomId = searchParams.get(\"roomId\") || \"4\"\r\n    const { setEasyQuestionNumber, setMediumQuestionNumber, setHardQuestionNumber, setLevel } = usePlayer()\r\n    const [buzzedPlayer, setBuzzedPlayer] = useState<string>(\"\");\r\n    const [showModal, setShowModal] = useState(false); // State for modal visibility\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        // Optionally clear buzzedPlayer if you want to reset it\r\n        setBuzzedPlayer(\"\");\r\n\r\n        if (isHost) {\r\n            resetBuzz(roomId)\r\n        }\r\n    };\r\n    // Function to handle cell click (only for host)\r\n    const handleCellClick = (row: number, col: number) => {\r\n        if (!isHost) return; // Prevent non-host users from interacting\r\n        setMenu({\r\n            visible: true,\r\n            rowIndex: row,\r\n            colIndex: col,\r\n        });\r\n    };\r\n\r\n    // Function to handle menu actions\r\n    const handleMenuAction = (action: 'select' | 'red' | 'green' | 'blue' | 'yellow', row: number, col: number) => {\r\n        if (action === 'select') {\r\n            if (initialGrid[row][col] == \"\") {\r\n\r\n                setLevel(\"Dễ\")\r\n            }\r\n\r\n            if (initialGrid[row][col] == \"!\") {\r\n\r\n                setLevel(\"Trung bình\")\r\n            }\r\n\r\n            if (initialGrid[row][col] == \"?\") {\r\n\r\n                setLevel(\"Khó\")\r\n            }\r\n\r\n            sendSelectedCell(roomId, col.toString(), row.toString())\r\n            const questionIndex = row * 5 + col; // Calculate question index from grid position\r\n            if (questions[questionIndex]) {\r\n                setSelectedQuestion(questions[questionIndex]);\r\n                setGridColors((prev) => {\r\n                    const newGrid = prev.map((rowArray) => [...rowArray]);\r\n                    // Reset the previously selected cell to white, if it exists and wasn't colored otherwise\r\n                    if (selectedCell) {\r\n                        const { row: prevRow, col: prevCol } = selectedCell;\r\n                        // Only reset if the cell is still light yellow (i.e., not changed by color buttons)\r\n                        if (newGrid[prevRow][prevCol] === '#FFFF99') {\r\n                            newGrid[prevRow][prevCol] = '#FFFFFF';\r\n                        }\r\n                    }\r\n                    // Set the current cell to light yellow\r\n                    newGrid[row][col] = '#FFFF99'; // Light yellow\r\n                    return newGrid;\r\n                });\r\n                // Update the selected cell\r\n                setSelectedCell({ row, col });\r\n            }\r\n        } else {\r\n            sendCellColor(roomId, col.toString(), row.toString(), action)\r\n            // Set the cell color based on the selected action\r\n\r\n            setGridColors((prev) => {\r\n                const newGrid = prev.map((rowArray) => [...rowArray]);\r\n                newGrid[row][col] = colorMap[action];\r\n                return newGrid;\r\n            });\r\n            // If the cell was previously selected, clear the selection\r\n            if (selectedCell && selectedCell.row === row && selectedCell.col === col) {\r\n                setSelectedCell(null);\r\n            }\r\n        }\r\n        setMenu({ visible: false }); // Close the menu\r\n    };\r\n    const lastBuzzedPlayerRef = useRef<string | null>(null);\r\n    useEffect(() => {\r\n\r\n        let hasMounted = false;\r\n        const unsubscribeBuzzing = listenToBuzzing(roomId, (playerName) => {\r\n            // if (!hasMounted) {\r\n            //     hasMounted = true; // skip initial\r\n            //     return;\r\n            // }\r\n            console.log(\"playerName on host\", playerName);\r\n\r\n            console.log(\"listening on buzzing\");\r\n\r\n            if (playerName && playerName !== \"\") {\r\n                setBuzzedPlayer(playerName);\r\n                console.log(\"playerName\", typeof playerName);\r\n\r\n                console.log(playerName, \"đã bấm chuông\")\r\n                setShowModal(true); // Show modal when a player buzzes\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            unsubscribeBuzzing();\r\n        };\r\n    }, [roomId]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribePlayers = listenToSound(roomId, (type) => {\r\n\r\n            const audio = sounds[`${type}`];\r\n            if (audio) {\r\n                audio.play();\r\n            }\r\n            console.log(\"sound type\", type)\r\n        });\r\n\r\n        // No need to set state here; it's handled by useState initializer\r\n        return () => {\r\n            unsubscribePlayers();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        const unsubscribePlayers = listenToAnswers(roomId, (answer) => {\r\n            const audio = sounds['correct'];\r\n            if (audio) {\r\n                audio.play();\r\n            }\r\n            setCorrectAnswer(`Đáp án: ${answer}`)\r\n            const timeOut = setTimeout(() => {\r\n                setCorrectAnswer(\"\")\r\n            }, 4000)\r\n            console.log(\"answer\", answer)\r\n            clearTimeout(timeOut)\r\n        });\r\n\r\n        // No need to set state here; it's handled by useState initializer\r\n        return () => {\r\n            unsubscribePlayers();\r\n\r\n        };\r\n    }, []);\r\n    useEffect(() => {\r\n\r\n        const unsubscribePlayers = listenToQuestions(roomId, (data) => {\r\n            console.log(\"questions\", data);\r\n\r\n            setCurrentQuestion(data.question)\r\n        });\r\n\r\n        return () => {\r\n            unsubscribePlayers();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        const unsubscribePlayers = listenToSelectedCell(roomId, (data) => {\r\n            console.log(\"Selected cell data:\", data);\r\n            // Ensure data has the expected properties\r\n            if (data && typeof data.rowIndex === 'string' && typeof data.colIndex === 'string') {\r\n                const row = parseInt(data.rowIndex, 10);\r\n                const col = parseInt(data.colIndex, 10);\r\n\r\n                // Check if indices are valid numbers and within 5x5 grid bounds\r\n                if (!isNaN(row) && !isNaN(col) && row >= 0 && row < 5 && col >= 0 && col < 5) {\r\n                    setGridColors((prev) => {\r\n                        const newGrid = prev.map((rowArray) => [...rowArray]);\r\n                        // Reset all cells with light yellow (#FFFF99) to white (#FFFFFF)\r\n                        for (let prevRow = 0; prevRow < 5; prevRow++) {\r\n                            for (let prevCol = 0; prevCol < 5; prevCol++) {\r\n                                if (newGrid[prevRow][prevCol] === '#FFFF99') {\r\n                                    newGrid[prevRow][prevCol] = '#FFFFFF';\r\n                                }\r\n                            }\r\n                        }\r\n                        // Set the current cell to light yellow\r\n                        newGrid[row][col] = '#FFFF99';\r\n                        return newGrid;\r\n                    });\r\n                    // Update the selected cell\r\n                    setSelectedCell({ row, col });\r\n                } else {\r\n                    console.warn(`Invalid cell indices: row=${row}, col=${col}`);\r\n                }\r\n            } else {\r\n                console.warn(\"Invalid or missing data from listenToSelectedCell:\", data);\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            unsubscribePlayers();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n        const unsubscribePlayers = listenToCellColor(roomId, (data) => {\r\n            console.log(\"questions\", data);\r\n            const row = parseInt(data.rowIndex)\r\n            const col = parseInt(data.colIndex)\r\n            const color = data.color\r\n\r\n            if (!isNaN(row) && !isNaN(col) && row >= 0 && row < 5 && col >= 0 && col < 5 && color) {\r\n                setGridColors((prev) => {\r\n                    const newGrid = prev.map((rowArray) => [...rowArray]);\r\n                    newGrid[row][col] = colorMap[color];\r\n                    return newGrid;\r\n                });\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            unsubscribePlayers();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n                setMenu({ visible: false });\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center\">\r\n            {/* Display selected question */}\r\n            <h2 className=\"text-xl font-bold text-black mb-4\">\r\n                {currentQuestion ? currentQuestion : ''}\r\n            </h2>\r\n\r\n            {\r\n                correctAnswer &&\r\n                <>\r\n                    <h2 className=\"text-xl font-bold text-black mb-4\">\r\n                        {correctAnswer}\r\n                    </h2>\r\n                </>\r\n            }\r\n\r\n            {/* Column labels (1, 2, 3, 4, 5) */}\r\n            <div className=\"grid grid-cols-6 gap-2 mb-2\">\r\n                <div></div> {/* Empty corner cell */}\r\n                {['1', '2', '3', '4', '5'].map((label) => (\r\n                    <div key={label} className=\"flex items-center justify-center font-bold text-black w-16 h-16\">\r\n                        {label}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Render 5x5 grid with row labels (A, B, C, D, E) */}\r\n            <div className=\"grid grid-rows-5 gap-2\">\r\n                {['A', 'B', 'C', 'D', 'E'].map((rowLabel, rowIndex) => (\r\n                    <div key={rowIndex} className=\"flex\">\r\n                        <div className=\"flex items-center justify-center font-bold text-black w-16 h-16\">\r\n                            {rowLabel} {/* Row label */}\r\n                        </div>\r\n                        {initialGrid[rowIndex].map((cell, colIndex) => {\r\n                            const showMenu =\r\n                                menu.visible &&\r\n                                menu.rowIndex === rowIndex &&\r\n                                menu.colIndex === colIndex;\r\n\r\n                            return (\r\n                                <div className=\"relative flex items-center\" key={`${rowIndex}-${colIndex}`}>\r\n                                    <div\r\n                                        onClick={() => handleCellClick(rowIndex, colIndex)}\r\n                                        className={`flex items-center justify-center w-16 h-16 rounded-md ${isHost ? 'cursor-pointer' : 'cursor-not-allowed'\r\n                                            }`} // Disable interaction for non-hosts\r\n                                        style={{\r\n                                            backgroundColor: gridColors[rowIndex][colIndex],\r\n                                            border: '1px solid #000',\r\n                                        }}\r\n                                    >\r\n                                        <span className=\"text-black text-lg\">{cell}</span>\r\n                                    </div>\r\n\r\n                                    {showMenu && (\r\n                                        <div\r\n                                            ref={menuRef}\r\n                                            className=\"absolute left-20 top-1/2 transform -translate-y-1/2 flex space-x-2 bg-white border border-gray-300 rounded shadow-lg p-1 z-10\"\r\n                                        >\r\n                                            <button\r\n                                                className=\"px-2 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                                                onClick={() =>\r\n                                                    handleMenuAction('select', rowIndex, colIndex)\r\n                                                }\r\n                                            >\r\n                                                SELECT\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"w-6 h-6 bg-red-500 rounded\"\r\n                                                onClick={() =>\r\n                                                    handleMenuAction('red', rowIndex, colIndex)\r\n                                                }\r\n                                            />\r\n                                            <button\r\n                                                className=\"w-6 h-6 bg-green-500 rounded\"\r\n                                                onClick={() =>\r\n                                                    handleMenuAction('green', rowIndex, colIndex)\r\n                                                }\r\n                                            />\r\n                                            <button\r\n                                                className=\"w-6 h-6 bg-blue-500 rounded\"\r\n                                                onClick={() =>\r\n                                                    handleMenuAction('blue', rowIndex, colIndex)\r\n                                                }\r\n                                            />\r\n                                            <button\r\n                                                className=\"w-6 h-6 bg-yellow-500 rounded\"\r\n                                                onClick={() =>\r\n                                                    handleMenuAction('yellow', rowIndex, colIndex)\r\n                                                }\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            {showModal && buzzedPlayer && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n                    <div className=\"bg-white rounded-lg p-6 w-80 shadow-lg\">\r\n                        <h2 className=\"text-lg font-semibold text-gray-800 mb-4 text-center\">\r\n                            {`${buzzedPlayer} đã nhấn chuông trả lời`}\r\n                        </h2>\r\n                        <div className=\"flex justify-center\">\r\n                            <button\r\n                                onClick={handleCloseModal}\r\n                                className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n                            >\r\n                                Đóng\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuestionBoxRound4;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}